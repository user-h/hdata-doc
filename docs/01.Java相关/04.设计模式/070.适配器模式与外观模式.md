---
title: é€‚é…å™¨æ¨¡å¼ä¸å¤–è§‚æ¨¡å¼
date: 2022-07-18 23:40:41
permalink: /pages/c7cf8b/
---
## é€‚é…å™¨æ¨¡å¼ï¼ˆAdaptor Patternï¼‰

<span style='color:red'><b>é€‚é…å™¨æ¨¡å¼</b> å°†ä¸€ä¸ªç±»çš„æ¥å£ï¼Œè½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨è®©åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥åˆä½œæ— é—´ã€‚</span>

#### é—®é¢˜æå‡ºï¼šç«é¸¡è½¬æ¢å™¨

å‡å¦‚æˆ‘ä»¬åœ¨è·¯ä¸Šé‡è§ä¸€ä¸ªNPCï¼Œå¿…é¡»ç»™ä»–ä¸€åªé¸­å­æ‰èƒ½å®Œæˆä»»åŠ¡ã€‚ä½†æ˜¯æˆ‘ä»¬åªæœ‰ä¸€åªç«é¸¡ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦é€‚é…å™¨æ¨¡å¼æ¥é€‚é…ä»–çš„éœ€æ±‚ã€‚ğŸ˜•ğŸ¤£

#### ç±»å›¾ï¼ˆå¯¹è±¡é€‚é…å™¨ï¼‰
<br/>

é‡‡ç”¨ç»„åˆçš„æ–¹å¼

```mermaid
classDiagram
  class Target{
    <<Interface>>
    +request()
  }
  class Adaptee{
    +specificRequest()
  }
  class Adaptor{
    Adaptee adaptee
    +request()
  }
  
  class Client{
  }

  Target <|.. Adaptor : å®ç°
  Adaptee <-- Adaptor : å…³è”
  Target <-- Client : å…³è”
```

#### ä»£ç å®ç°

<code-group>
  <code-block title="é¸­å­ç±»" active>
  ```java
  / é¸­å­æ¥å£
  public interface Duck {
      public void quack();
      public void fly();
  }
  
  class MallardDuck implements Duck{
  
      @Override
      public void quack() {
          System.out.println("ç»¿å¤´é¸­å«");
      }
  
      @Override
      public void fly() {
          System.out.println("ç»¿å¤´é¸­é£");
      }
  }
  ```
  </code-block>

  <code-block title="ç«é¸¡ç±»">
  ```java
  /**
   * ç«é¸¡æ¥å£
   */
  public interface Turkey {
      public void gobble();   // ç«é¸¡å’¯å’¯å«
      public void fly();      // ç«é¸¡é£
  }
  
  /**
   * ç«é¸¡å®ç°
   */
  class WildTurkey implements Turkey {
  
      @Override
      public void gobble() {
          System.out.println("ç«é¸¡å’¯å’¯å«");
      }
  
      @Override
      public void fly() {
          System.out.println("ç«é¸¡é£è¡Œ");
      }
  }
  ```
  </code-block>
  
  <code-block title="é€‚é…å™¨">
  ```java
  public class TurkeyAdaptor implements Duck {
      Turkey turkey;
  
      public TurkeyAdaptor(Turkey turkey) {
          this.turkey = turkey;
      }
  
      @Override
      public void quack() {
          turkey.gobble();
      }
  
      @Override
      public void fly() {
          turkey.fly();
      }
  }
  ```
  </code-block>
  
  <code-block title="æµ‹è¯•ç±»">
  ```java
  public class Main {
      public static void main(String[] args) {
          MallardDuck duck = new MallardDuck();   // åˆ›å»ºä¸€åªé¸­å­
          WildTurkey turkey = new WildTurkey();   // åˆ›å»ºä¸€åªç«é¸¡
  
          Main main = new Main();
          main.testDuck(duck);
  //        main.testDuck(turkey);
          TurkeyAdaptor turkeyAdaptor = new TurkeyAdaptor(turkey);
          main.testDuck(turkeyAdaptor);
      }
  
      /**
       * é¸­å­æµ‹è¯•ç±»
       * @param duck
       */
      public void testDuck(Duck duck) {
          duck.quack();
          duck.fly();
      }
  }
  ```
  </code-block>
</code-group>

#### å¤šç»§æ‰¿æ—¶ç±»é€‚é…å™¨ï¼ˆJavaæ— æ³•å®ç°ï¼‰

é‡‡ç”¨ç»§æ‰¿çš„å½¢å¼<br/>

```mermaid
classDiagram
  class Target{
    +request()
  }
  class Adaptee{
    +specificRequest()
  }
  class Adaptor{
    Adaptee adaptee
    +request()
  }
  
  class Client{
  }

  Target <|-- Adaptor : ç»§æ‰¿
  Adaptee <|-- Adaptor : ç»§æ‰¿
  Target <-- Client : å…³è”
```

#### çœŸå®ä¸–ç•Œï¼ˆJavaï¼‰çš„é€‚é…å™¨

##### é—®é¢˜æå‡º

1. æ—§ä¸–ç•Œçš„æšä¸¾å™¨
    > å¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡Javaï¼Œå¯èƒ½è®°å¾—æ—©æœŸçš„é›†åˆ(collection)ç±»å‹ï¼ˆä¾‹å¦‚ï¼šVectorã€Stackã€Hashtable)éƒ½å®ç°äº†ä¸€ä¸ªåä¸ºelementsï¼ˆï¼‰çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªEnumerationï¼ˆä¸¾ï¼‰ã€‚è¿™ä¸ªEnumerationæ¥å£å¯ä»¥é€ä¸€èµ°è¿‡æ­¤é›†åˆå†…çš„æ¯ä¸ªå…ƒç´ ï¼Œè€Œæ— éœ€çŸ¥é“å®ƒä»¬åœ¨é›†åˆå†…æ˜¯å¦‚ä½•è¢«ç®¡ç†çš„ã€‚

2. æ–°ä¸–ç•Œçš„è¿­ä»£å™¨
    > å½“Sunæ¨å‡ºæ›´æ–°åçš„é›†åˆç±»æ—¶ï¼Œå¼€å§‹ä½¿ç”¨äº†Iteratorï¼ˆè¿­ä»£å™¨ï¼‰æ¥å£ï¼Œè¿™ä¸ªæ¥å£å’Œæšä¸¾æ¥å£å¾ˆåƒï¼Œéƒ½å¯ä»¥è®©ä½ éå†æ­¤é›†åˆç±»å‹å†…çš„æ¯ä¸ªå…ƒç´ ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œè¿­ä»£å™¨è¿˜æä¾›äº†åˆ é™¤å…ƒç´ çš„èƒ½åŠ›ã€‚

3. é—ç•™ä»£ç æš´éœ²äº†æšä¸¾å™¨æ¥å£ï¼Œä½†æ˜¯æ–°ä»£ç åªå¸Œæœ›ç”¨è¿­ä»£å™¨ã€‚æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦æ„é€ ä¸€ä¸ªé€‚é…å™¨ã€‚

##### å°†æšä¸¾é€‚é…åˆ°è¿­ä»£å™¨

ç”±äº Enumeration ä¸ºâ€œåªè¯»â€æ¥å£ï¼Œæ— æ³•å®ç° remove() çš„æ•ˆæœï¼Œåªèƒ½å…ˆåœ¨ remove ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆå¯ä»¥ä½¿ç”¨è£…é¥°è€…æ¨¡å¼å®ç°ï¼Ÿï¼‰

```mermaid
classDiagram
  class Iterator{
    <<Interface>>
    +hasNext()
    +next()
    +remove()
  }
  class Enumeration{
    <<Interface>>
    +hasMoreElements()
    +nextElement()
  }
  
  class EnumerationIterator{
    Enumeration enumeration
    +hasNext()
    +next()
    +remove()
  }

  Iterator <|.. EnumerationIterator : å®ç°
  Enumeration <-- EnumerationIterator : å…³è”
```

## å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰

<span style='color:red'><b>å¤–è§‚æ¨¡å¼</b> æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚</span>

#### ç±»å›¾

```mermaid  
classDiagram  
    class HomeTheaterFacade{
      Amplifier amo
      Tuner tuner
      DvdPlayer dvd
      CdPlayer cd
      Projector projector
      TheaterLights lights
      Screen screen
      PopcornPopper popper
      + watchMovie()
      + endMovie()
      + listenToCd()
      + endCd()
      + listenToRadio()
      + endRadio()
    }
    class Amplifier{
      Tuner tuner
      DvdPlayer dvdPlayer
      CdPlayer cdPlayer
      on()
      off()
      setCd()
      setDvd()
      setStereoSound()
      setSturroudSoud()
      setTuner()
      setVolume()
      toString()
    }
    class DvdPlayer{
      Amplifier amplifier
      on()
      off()
      eject()
      pause()
      play()
      setStereoSound()
      setSturroudSoud()
      stop()
    }
    class CdPlayer{
      Amplifier amplifier
      on()
      off()
      eject()
      pause()
      play()
      stop()
      toString()
    }
    class Projector{
      DvdPlayer dvdPlayer
      on()
      off()
      tvMode()
      wideScreenMode()
      toString()
    }

    class Tuner{
      Amplifier amplifier
      on()
      off()
      setAm()
      setFm()
      setFrequency()
      toString()
    }
    class Screen{
      up()
      down()
      toString()
    }
    class PopcornPopper{
      on()
      off()
      pop()
      toString()
    }
    class TheaterLights{
      on()
      off()
      dim()
      toString()
    }

    HomeTheaterFacade o-- Amplifier : èšåˆ
    HomeTheaterFacade o-- Tuner : èšåˆ
    HomeTheaterFacade o-- DvdPlayer : èšåˆ
    HomeTheaterFacade o-- CdPlayer : èšåˆ
    HomeTheaterFacade o-- Projector : èšåˆ
    HomeTheaterFacade o-- TheaterLights : èšåˆ
    HomeTheaterFacade o-- Screen : èšåˆ
    HomeTheaterFacade o-- PopcornPopper : èšåˆ
	
	Amplifier ..> Tuner:ä¾èµ–
	Amplifier ..> DvdPlayer:ä¾èµ–
	Amplifier ..> CdPlayer:ä¾èµ–
	Tuner ..> Amplifier:ä¾èµ–
	DvdPlayer ..> Amplifier:ä¾èµ–
	CdPlayer ..> Amplifier:ä¾èµ–
	Projector ..> DvdPlayer:ä¾èµ–
```

#### æœ€å°‘çŸ¥é“åŸåˆ™

æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼šåªå’Œä½ çš„å¯†å‹è°ˆè¯ã€‚

> æœ€å°‘çŸ¥è¯†ï¼ˆLeast Knowledgeï¼‰åŸåˆ™å‘Šè¯‰æˆ‘ä»¬è¦å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œåªç•™ä¸‹å‡ ä¸ªâ€œå¯†å‹â€ã€‚  
> è¿™ä¸ªåŸåˆ™å¸Œæœ›æˆ‘ä»¬åœ¨è®¾è®¡ä¸­ï¼Œä¸è¦è®©å¤ªå¤šçš„ç±»è€¦åˆåœ¨ä¸€èµ·ï¼Œå…å¾—ä¿®æ”¹ç³»ç»Ÿä¸­ä¸€éƒ¨åˆ†ï¼Œä¼šå½±å“åˆ°å…¶ä»–éƒ¨åˆ†ã€‚å¦‚æœè®¸å¤šç±»ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±ä¼šå˜æˆä¸€ä¸ªæ˜“ç¢çš„ç³»ç»Ÿï¼Œå®ƒéœ€è¦èŠ±è®¸å¤šæˆæœ¬ç»´æŠ¤ï¼Œä¹Ÿä¼šå› ä¸ºå¤ªå¤æ‚è€Œä¸å®¹æ˜“è¢«å…¶ä»–äººäº†è§£ã€‚

è¯¥åŸåˆ™æä¾›ä¸€äº›æ–¹é’ˆï¼šå°±ä»»ä½•å¯¹è±¡è€Œè¨€ï¼Œåœ¨è¯¥å¯¹çº¿çš„æ–¹æ³•å†…ï¼Œæˆ‘ä»¬åªåº”è¯¥è°ƒç”¨å±äºä»¥ä¸‹èŒƒå›´çš„æ–¹æ³•ï¼š
1. è¯¥å¯¹è±¡æœ¬èº«
2. è¢«å½“ä½œæ–¹æ³•çš„å‚æ•°è€Œä¼ é€’è¿›æ¥çš„å¯¹è±¡
3. æ­¤æ–¹æ³•æ‰€åˆ›å»ºæˆ–å®ä¾‹åŒ–çš„ä»»ä½•å¯¹è±¡
4 å¯¹è±¡çš„ä»»ä½•ç»„ä»¶ï¼ˆHAS-Aå…³ç³»ï¼‰

#### è¦ç‚¹

- å½“éœ€è¦ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„ç±»è€Œå…¶æ¥å£å¹¶ä¸ç¬¦åˆä½ çš„éœ€è¦æ—¶ï¼Œå°±ä½¿ç”¨é€‚é…å™¨ã€‚
- å½“éœ€è¦ç®€åŒ–å¹¶ç»Ÿä¸€ä¸€ä¸ªå¾ˆå¤§çš„æ¥å£æˆ–è€…ä¸€ç¾¤å¤æ‚çš„æ¥å£æ—¶ï¼Œä½¿ç”¨å¤–è§‚ã€‚
- é€‚é…å™¨æ”¹å˜æ¥å£ä»¥ç¬¦åˆå®¢æˆ·çš„æœŸæœ›ã€‚
- å¤–è§‚å°†å®¢æˆ·ä»ä¸€ä¸ªå¤æ‚çš„å­ç³»ç»Ÿä¸­è§£è€¦ã€‚
- å®ç°ä¸€ä¸ªé€‚é…å™¨å¯èƒ½éœ€è¦ä¸€ç•ªåŠŸå¤«ï¼Œä¹Ÿå¯èƒ½ä¸è´¹åŠŸå¤«ï¼Œè§†ç›®æ ‡æ¥å£çš„å¤§å°ä¸å¤æ‚åº¦è€Œå®šã€‚
- å®ç°ä¸€ä¸ªå¤–è§‚ï¼Œéœ€è¦å°†å­ç³»ç»Ÿç»„åˆè¿›å¤–è§‚ä¸­ï¼Œç„¶åå°†å·¥ä½œå§”æ‰˜ç»™å­ç³»ç»Ÿæ‰§è¡Œã€‚
- é€‚é…å™¨æ¨¡å¼æœ‰ä¸¤ç§å½¢å¼ï¼šå¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨ã€‚ç±»é€‚é…å™¨éœ€è¦ç”¨åˆ°å¤šé‡ç»§æ‰¿ã€‚
- ä½ å¯ä»¥ä¸ºä¸€ä¸ªå­ç³»ç»Ÿå®ç°ä¸€ä¸ªä»¥ä¸Šçš„å¤–è§‚ã€‚
- é€‚é…å™¨å°†ä¸€ä¸ªå¯¹è±¡åŒ…è£…èµ·æ¥ä»¥æ”¹å˜å…¶æ¥å£ï¼Œè£…é¥°è€…å°†ä¸€ä¸ªå¯¹è±¡åŒ…è£…èµ·æ¥ä»¥å¢åŠ æ–°çš„è¡Œä¸ºå’Œè´£ä»»ï¼Œè€Œå¤–è§‚å°†ä¸€ç¾¤å¯¹è±¡â€œåŒ…è£…â€èµ·æ¥ä»¥ç®€åŒ–å…¶æ¥å£ã€‚
