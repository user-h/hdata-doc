
### 常用命令

#### 启动服务

```shell
# 单节点启动
./bin/kafka-server-start.sh -daemon config/server.properties
```

#### 📌 Topic 管理

|功能|命令|
|---|---|
|查看所有 Topic|`$KAFKA_HOME/bin/kafka-topics.sh --list --bootstrap-server localhost:9092`|
|查看 Topic 详情|`$KAFKA_HOME/bin/kafka-topics.sh --describe --topic topic1 --bootstrap-server localhost:9092`|
|创建 Topic|`$KAFKA_HOME/bin/kafka-topics.sh --create --topic test --partitions 3 --replication-factor 1 --bootstrap-server localhost:9092`|
|删除 Topic|`$KAFKA_HOME/bin/kafka-topics.sh --delete --topic test --bootstrap-server localhost:9092`|

---

#### 📌 生产者 & 消费者（sasl认证需要加--consumer.config /xx/consumer.properties）

| 功能            | 命令                                                                                                                                                            |
|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 启动生产者（写消息）    | `$KAFKA_HOME/bin/kafka-console-producer.sh --topic test --broker-list localhost:9092`                                                                         |
| 启动消费者（读消息）    | `$KAFKA_HOME/bin/kafka-console-consumer.sh --topic test --from-beginning --bootstrap-server localhost:9092`                                                   |
| 指定消费者组并限制消息数  | `$KAFKA_HOME/bin/kafka-console-consumer.sh --topic test --group group1 --from-beginning --max-messages 100 --bootstrap-server localhost:9092`                 |
| 消费者从指定位置开始消费  | `$KAFKA_HOME/bin/kafka-console-consumer.sh --topic test --offset 10 --partition 0 --bootstrap-server localhost:9092`                            |
| 查看消费者组列表      | `$KAFKA_HOME/bin/kafka-consumer-groups.sh --list --bootstrap-server localhost:9092`                                                                           |
| 查看消费者组详情      | `$KAFKA_HOME/bin/kafka-consumer-groups.sh --describe --group group1 --bootstrap-server localhost:9092`                                                        |
| 重置消费者组 offset | `$KAFKA_HOME/bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group group1 --reset-offsets --to-earliest【--to-latest】 --execute --topic test` |


### 常用命令（待测试）

---

#### 📌 SASL 用户管理（SCRAM）

> ⚠️ 前提：Kafka 开启 **SASL/SCRAM** 认证

|功能|命令|
|---|---|
|添加用户（SCRAM-SHA-256）|`$KAFKA_HOME/bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=123456]' --entity-type users --entity-name testuser`|
|添加用户（SCRAM-SHA-512）|`$KAFKA_HOME/bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-512=[iterations=8192,password=123456]' --entity-type users --entity-name testuser`|
|查看用户配置|`$KAFKA_HOME/bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name testuser`|
|删除用户|`$KAFKA_HOME/bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --delete-config 'SCRAM-SHA-256' --entity-type users --entity-name testuser`|

---

#### 📌 ACL 权限控制

|功能|命令|
|---|---|
|给用户授权 Topic 读写|`$KAFKA_HOME/bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:testuser --operation Read --operation Write --topic test`|
|给用户授权消费组权限|`$KAFKA_HOME/bin/kafka-acls.sh --bootstrap-server localhost:9092 --add --allow-principal User:testuser --operation Read --group my-group`|
|查看 ACL|`$KAFKA_HOME/bin/kafka-acls.sh --bootstrap-server localhost:9092 --list`|
|删除 ACL|`$KAFKA_HOME/bin/kafka-acls.sh --bootstrap-server localhost:9092 --remove --allow-principal User:testuser --operation Read --operation Write --topic test`|

---

#### 📌 运维相关

|功能|命令|
|---|---|
|查看 Broker 配置|`$KAFKA_HOME/bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type brokers --entity-name 0`|
|修改 Broker 配置|`$KAFKA_HOME/bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --entity-type brokers --entity-name 0 --add-config log.retention.hours=168`|
|查看 Kafka 版本|`$KAFKA_HOME/bin/kafka-broker-api-versions.sh --bootstrap-server localhost:9092`|
