<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python类库学习 | 唐宋元明清</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/hdata-doc/img/favicon.ico">
    <meta name="description" content="">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/hdata-doc/assets/css/0.styles.ce16c74b.css" as="style"><link rel="preload" href="/hdata-doc/assets/js/app.37e4fbb6.js" as="script"><link rel="preload" href="/hdata-doc/assets/js/2.82afd9cb.js" as="script"><link rel="preload" href="/hdata-doc/assets/js/65.460effd7.js" as="script"><link rel="prefetch" href="/hdata-doc/assets/js/10.7b061388.js"><link rel="prefetch" href="/hdata-doc/assets/js/11.3d84b622.js"><link rel="prefetch" href="/hdata-doc/assets/js/12.f524e450.js"><link rel="prefetch" href="/hdata-doc/assets/js/13.b3ff7d26.js"><link rel="prefetch" href="/hdata-doc/assets/js/14.3675e190.js"><link rel="prefetch" href="/hdata-doc/assets/js/15.676eac9f.js"><link rel="prefetch" href="/hdata-doc/assets/js/16.c546644f.js"><link rel="prefetch" href="/hdata-doc/assets/js/17.d80c3241.js"><link rel="prefetch" href="/hdata-doc/assets/js/18.bfa024db.js"><link rel="prefetch" href="/hdata-doc/assets/js/19.c4ebe893.js"><link rel="prefetch" href="/hdata-doc/assets/js/20.0c06c705.js"><link rel="prefetch" href="/hdata-doc/assets/js/21.e586d4fc.js"><link rel="prefetch" href="/hdata-doc/assets/js/22.d4747bce.js"><link rel="prefetch" href="/hdata-doc/assets/js/23.cfa91ca4.js"><link rel="prefetch" href="/hdata-doc/assets/js/24.77c960d1.js"><link rel="prefetch" href="/hdata-doc/assets/js/25.cc923a02.js"><link rel="prefetch" href="/hdata-doc/assets/js/26.432e9cf4.js"><link rel="prefetch" href="/hdata-doc/assets/js/27.3248ab2a.js"><link rel="prefetch" href="/hdata-doc/assets/js/28.67efb541.js"><link rel="prefetch" href="/hdata-doc/assets/js/29.e500a45f.js"><link rel="prefetch" href="/hdata-doc/assets/js/3.5c0f818a.js"><link rel="prefetch" href="/hdata-doc/assets/js/30.27916467.js"><link rel="prefetch" href="/hdata-doc/assets/js/31.db03022b.js"><link rel="prefetch" href="/hdata-doc/assets/js/32.40451343.js"><link rel="prefetch" href="/hdata-doc/assets/js/33.57a8afa5.js"><link rel="prefetch" href="/hdata-doc/assets/js/34.e8da6dc5.js"><link rel="prefetch" href="/hdata-doc/assets/js/35.25dea1e4.js"><link rel="prefetch" href="/hdata-doc/assets/js/36.ecc28683.js"><link rel="prefetch" href="/hdata-doc/assets/js/37.976e826a.js"><link rel="prefetch" href="/hdata-doc/assets/js/38.f1f7e891.js"><link rel="prefetch" href="/hdata-doc/assets/js/39.6daaca2d.js"><link rel="prefetch" href="/hdata-doc/assets/js/4.528973e8.js"><link rel="prefetch" href="/hdata-doc/assets/js/40.3766a207.js"><link rel="prefetch" href="/hdata-doc/assets/js/41.515be286.js"><link rel="prefetch" href="/hdata-doc/assets/js/42.87e45d55.js"><link rel="prefetch" href="/hdata-doc/assets/js/43.0eea2c15.js"><link rel="prefetch" href="/hdata-doc/assets/js/44.f5a1989e.js"><link rel="prefetch" href="/hdata-doc/assets/js/45.96eaa743.js"><link rel="prefetch" href="/hdata-doc/assets/js/46.6db88dae.js"><link rel="prefetch" href="/hdata-doc/assets/js/47.f3e98870.js"><link rel="prefetch" href="/hdata-doc/assets/js/48.138b9428.js"><link rel="prefetch" href="/hdata-doc/assets/js/49.b4e2bdb7.js"><link rel="prefetch" href="/hdata-doc/assets/js/5.53dd3ef1.js"><link rel="prefetch" href="/hdata-doc/assets/js/50.6624a71f.js"><link rel="prefetch" href="/hdata-doc/assets/js/51.4273468b.js"><link rel="prefetch" href="/hdata-doc/assets/js/52.d69c448e.js"><link rel="prefetch" href="/hdata-doc/assets/js/53.3e61789b.js"><link rel="prefetch" href="/hdata-doc/assets/js/54.ed81b599.js"><link rel="prefetch" href="/hdata-doc/assets/js/55.a2edf6d0.js"><link rel="prefetch" href="/hdata-doc/assets/js/56.324986ae.js"><link rel="prefetch" href="/hdata-doc/assets/js/57.640caf90.js"><link rel="prefetch" href="/hdata-doc/assets/js/58.344d4730.js"><link rel="prefetch" href="/hdata-doc/assets/js/59.d9078674.js"><link rel="prefetch" href="/hdata-doc/assets/js/6.22885e2c.js"><link rel="prefetch" href="/hdata-doc/assets/js/60.2afcb1b9.js"><link rel="prefetch" href="/hdata-doc/assets/js/61.996c28ca.js"><link rel="prefetch" href="/hdata-doc/assets/js/62.cb5e8bee.js"><link rel="prefetch" href="/hdata-doc/assets/js/63.146ed62c.js"><link rel="prefetch" href="/hdata-doc/assets/js/64.8bb9c50a.js"><link rel="prefetch" href="/hdata-doc/assets/js/66.f5294e94.js"><link rel="prefetch" href="/hdata-doc/assets/js/67.0da1dddd.js"><link rel="prefetch" href="/hdata-doc/assets/js/68.64117a5a.js"><link rel="prefetch" href="/hdata-doc/assets/js/69.ed33359f.js"><link rel="prefetch" href="/hdata-doc/assets/js/7.814d9e01.js"><link rel="prefetch" href="/hdata-doc/assets/js/70.1250ab19.js"><link rel="prefetch" href="/hdata-doc/assets/js/71.f6a79a2a.js"><link rel="prefetch" href="/hdata-doc/assets/js/72.683057b4.js"><link rel="prefetch" href="/hdata-doc/assets/js/73.94e5450b.js"><link rel="prefetch" href="/hdata-doc/assets/js/74.fa587d94.js"><link rel="prefetch" href="/hdata-doc/assets/js/75.48871ae9.js"><link rel="prefetch" href="/hdata-doc/assets/js/76.447894b5.js"><link rel="prefetch" href="/hdata-doc/assets/js/77.da5dadf2.js"><link rel="prefetch" href="/hdata-doc/assets/js/78.a8553a08.js"><link rel="prefetch" href="/hdata-doc/assets/js/79.bd712952.js"><link rel="prefetch" href="/hdata-doc/assets/js/8.a242d330.js"><link rel="prefetch" href="/hdata-doc/assets/js/9.c7938acd.js">
    <link rel="stylesheet" href="/hdata-doc/assets/css/0.styles.ce16c74b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hdata-doc/" class="home-link router-link-active"><img src="https://i.postimg.cc/2yr3430s/panda.jpg" alt="唐宋元明清" class="logo"> <span class="site-name can-hide">唐宋元明清</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hdata-doc/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/hdata-doc/pages/de9b5e/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/768c32/" class="nav-link">Java基础</a></li></ul></li><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/1d1863/" class="nav-link">hutool</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/1d1864/" class="nav-link">commons</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/1e9420/" class="nav-link">Spring Boot相关</a></li></ul></li><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/bdceb5/" class="nav-link">设计模式入门</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Hadoop</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/5d76a5/" class="nav-link">Hadoop分布式搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f9f70f/" class="nav-link">Hadoop高可用搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/3e77b2/" class="nav-link">集群端口</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/03a2bd/" class="nav-link">代码demo</a></li></ul></li><li class="dropdown-item"><h4>Zookeeper</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/e2226d/" class="nav-link">Zookeeper集群搭建</a></li></ul></li><li class="dropdown-item"><h4>Hive</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/edf4cb/" class="nav-link">Hive集群搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/dd806a/" class="nav-link">Hive相关</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/dd807a/" class="nav-link">HSQL</a></li></ul></li><li class="dropdown-item"><h4>Kafka</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/bfa383/" class="nav-link">Kafka集群搭建</a></li></ul></li><li class="dropdown-item"><h4>HBase</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/b22228/" class="nav-link">HBase集群搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/e15afa/" class="nav-link">HBase基础学习</a></li></ul></li><li class="dropdown-item"><h4>Spark</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/7d157d/" class="nav-link">Spark环境搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/b3ba00/" class="nav-link">Spark相关知识</a></li></ul></li><li class="dropdown-item"><h4>Flink</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/415096/" class="nav-link">Flink环境搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/415097/" class="nav-link">Flink学习</a></li></ul></li><li class="dropdown-item"><h4>Flume</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/e4166e/" class="nav-link">Flume安装配置</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/0376ec/" class="nav-link">Flume高可用集群安装</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/3408a8/" class="nav-link">Flume相关学习</a></li></ul></li><li class="dropdown-item"><h4>Sqoop</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/60b3d7/" class="nav-link">Sqoop安装配置</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/40f7a3/" class="nav-link">Sqoop使用</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/d89b45/" class="nav-link">docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/hdata-doc/pages/e0cc49/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Oracle</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/7e6951/" class="nav-link">Oracle相关知识杂记</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/b5c27a/" class="nav-link">系统函数篇</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/c2df29/" class="nav-link">与MySQL语法区别</a></li></ul></li><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/36476d/" class="nav-link">MySQL知识点</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/f2a330/" class="nav-link">Python简单语法</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f2a340/" class="nav-link">Python操作Office</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f2a341/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Python类库学习</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f799c7/" class="nav-link">Python爬虫</a></li></ul></li><li class="dropdown-item"><h4>Shell</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/5704cc/" class="nav-link">Shell基础</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/5765cc/" class="nav-link">Shell命令行</a></li></ul></li><li class="dropdown-item"><h4>Scala</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/c917bd/" class="nav-link">语法学习</a></li></ul></li><li class="dropdown-item"><h4>正则表达式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/e4e158/" class="nav-link">正则基础</a></li></ul></li><li class="dropdown-item"><h4>调度</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/a04438/" class="nav-link">调度工具</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/gxfmrs/" class="nav-link">前端相关</a></li></ul></li><li class="dropdown-item"><h4>杂记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/414e9c/" class="nav-link">常用工具或网站</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/c0e729/" class="nav-link">琐碎知识</a></li></ul></li><li class="dropdown-item"><h4>摘录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/AXI4oJ/" class="nav-link">摘录</a></li></ul></li></ul></div></div> <a href="https://github.com/user-h/hdata-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/hdata-doc/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/hdata-doc/pages/de9b5e/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/768c32/" class="nav-link">Java基础</a></li></ul></li><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/1d1863/" class="nav-link">hutool</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/1d1864/" class="nav-link">commons</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/1e9420/" class="nav-link">Spring Boot相关</a></li></ul></li><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/bdceb5/" class="nav-link">设计模式入门</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Hadoop</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/5d76a5/" class="nav-link">Hadoop分布式搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f9f70f/" class="nav-link">Hadoop高可用搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/3e77b2/" class="nav-link">集群端口</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/03a2bd/" class="nav-link">代码demo</a></li></ul></li><li class="dropdown-item"><h4>Zookeeper</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/e2226d/" class="nav-link">Zookeeper集群搭建</a></li></ul></li><li class="dropdown-item"><h4>Hive</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/edf4cb/" class="nav-link">Hive集群搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/dd806a/" class="nav-link">Hive相关</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/dd807a/" class="nav-link">HSQL</a></li></ul></li><li class="dropdown-item"><h4>Kafka</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/bfa383/" class="nav-link">Kafka集群搭建</a></li></ul></li><li class="dropdown-item"><h4>HBase</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/b22228/" class="nav-link">HBase集群搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/e15afa/" class="nav-link">HBase基础学习</a></li></ul></li><li class="dropdown-item"><h4>Spark</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/7d157d/" class="nav-link">Spark环境搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/b3ba00/" class="nav-link">Spark相关知识</a></li></ul></li><li class="dropdown-item"><h4>Flink</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/415096/" class="nav-link">Flink环境搭建</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/415097/" class="nav-link">Flink学习</a></li></ul></li><li class="dropdown-item"><h4>Flume</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/e4166e/" class="nav-link">Flume安装配置</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/0376ec/" class="nav-link">Flume高可用集群安装</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/3408a8/" class="nav-link">Flume相关学习</a></li></ul></li><li class="dropdown-item"><h4>Sqoop</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/60b3d7/" class="nav-link">Sqoop安装配置</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/40f7a3/" class="nav-link">Sqoop使用</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/d89b45/" class="nav-link">docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/hdata-doc/pages/e0cc49/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Oracle</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/7e6951/" class="nav-link">Oracle相关知识杂记</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/b5c27a/" class="nav-link">系统函数篇</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/c2df29/" class="nav-link">与MySQL语法区别</a></li></ul></li><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/36476d/" class="nav-link">MySQL知识点</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><!----> <span class="title" style="display:;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/f2a330/" class="nav-link">Python简单语法</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f2a340/" class="nav-link">Python操作Office</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f2a341/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Python类库学习</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/f799c7/" class="nav-link">Python爬虫</a></li></ul></li><li class="dropdown-item"><h4>Shell</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/5704cc/" class="nav-link">Shell基础</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/5765cc/" class="nav-link">Shell命令行</a></li></ul></li><li class="dropdown-item"><h4>Scala</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/c917bd/" class="nav-link">语法学习</a></li></ul></li><li class="dropdown-item"><h4>正则表达式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/e4e158/" class="nav-link">正则基础</a></li></ul></li><li class="dropdown-item"><h4>调度</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/a04438/" class="nav-link">调度工具</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/gxfmrs/" class="nav-link">前端相关</a></li></ul></li><li class="dropdown-item"><h4>杂记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/414e9c/" class="nav-link">常用工具或网站</a></li><li class="dropdown-subitem"><a href="/hdata-doc/pages/c0e729/" class="nav-link">琐碎知识</a></li></ul></li><li class="dropdown-item"><h4>摘录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/hdata-doc/pages/AXI4oJ/" class="nav-link">摘录</a></li></ul></li></ul></div></div> <a href="https://github.com/user-h/hdata-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/f2a330/" class="sidebar-link">Python简单语法学习</a></li><li><a href="/hdata-doc/pages/f2a340/" class="sidebar-link">Python操作Office</a></li><li><a href="/hdata-doc/pages/f2a341/" aria-current="page" class="active sidebar-link">Python类库学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#基础语法" class="sidebar-link">基础语法</a></li><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#numpy学习" class="sidebar-link">Numpy学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#ndarray类学习" class="sidebar-link">Ndarray类学习</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#np-array方法" class="sidebar-link">np.array方法</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#numpy数组创建方法" class="sidebar-link">Numpy数组创建方法</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#打印数组" class="sidebar-link">打印数组</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#基本操作-数组元素的运算" class="sidebar-link">基本操作 (数组元素的运算)</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#基本操作-矩阵乘积" class="sidebar-link">基本操作 (矩阵乘积)</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#形状操纵" class="sidebar-link">形状操纵</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#索引、切片和迭代" class="sidebar-link">索引、切片和迭代</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#深入" class="sidebar-link">深入:</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#深入-直方图" class="sidebar-link">深入: 直方图</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#附-创建一个3-3-的数组方法" class="sidebar-link">附:创建一个3*3 的数组方法</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#pandas-两种数据结构学习" class="sidebar-link">Pandas（两种数据结构学习）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#_1-series-一维标记数组-学习" class="sidebar-link">1.Series(一维标记数组)学习</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#_2-dataframe-二维标记数据结构-学习" class="sidebar-link">2.DataFrame(二维标记数据结构)学习</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#创建" class="sidebar-link">创建</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe值索引" class="sidebar-link">DataFrame值索引</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#层次化索引与unstack" class="sidebar-link">层次化索引与unstack</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe堆叠" class="sidebar-link">DataFrame堆叠</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe常用函数介绍-一-重新索引-reindex" class="sidebar-link">DataFrame常用函数介绍(一) 重新索引(reindex)</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe常用函数介绍-二-丢弃值-drop" class="sidebar-link">DataFrame常用函数介绍(二) 丢弃值(drop)</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe常用函数介绍-三-算术方法" class="sidebar-link">DataFrame常用函数介绍(三) 算术方法</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe常用函数介绍-四-索引排序" class="sidebar-link">DataFrame常用函数介绍(四) 索引排序</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe常用函数介绍-五-描述和汇总统计-待补充" class="sidebar-link">DataFrame常用函数介绍(五) 描述和汇总统计(待补充)</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#dataframe常用函数介绍-六-缺失值填充" class="sidebar-link">DataFrame常用函数介绍(六) 缺失值填充</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#pandas文件读取" class="sidebar-link">Pandas文件读取</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#pandas文件写入" class="sidebar-link">Pandas文件写入</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#pandas合并xls文件" class="sidebar-link">Pandas合并xls文件</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#pandas数据合并、清洗" class="sidebar-link">Pandas数据合并、清洗</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#merge函数-默认内连接" class="sidebar-link">merge函数 默认内连接</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#外连接" class="sidebar-link">外连接</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#外连接-2" class="sidebar-link">外连接</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#多列连接on" class="sidebar-link">多列连接on=[]</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#左连接-how-left" class="sidebar-link">左连接 how = 'left'</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#how-right" class="sidebar-link">how = 'right'</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#用表的行索引名作为连接" class="sidebar-link">用表的行索引名作为连接</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#join函数-为merge的特例-默认外连接" class="sidebar-link">join函数(为merge的特例) 默认外连接</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#combine-first函数-以一个为基准-另一个进行补充" class="sidebar-link">combine_first函数  以一个为基准,另一个进行补充</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#待补充" class="sidebar-link">待补充</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-一-值替换" class="sidebar-link">数据清理与转换(一) 值替换</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-二-去重复值" class="sidebar-link">数据清理与转换(二) 去重复值</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-三-索引重命名" class="sidebar-link">数据清理与转换(三) 索引重命名</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-四-数据转换" class="sidebar-link">数据清理与转换(四) 数据转换</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-五-数据离散化和装箱-指定划分边界" class="sidebar-link">数据清理与转换(五) 数据离散化和装箱 指定划分边界</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-五-数据离散化和装箱-平均划分边界" class="sidebar-link">数据清理与转换(五) 数据离散化和装箱 平均划分边界</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据清理与转换-五-数据离散化和装箱-分位划分边界" class="sidebar-link">数据清理与转换(五) 数据离散化和装箱 分位划分边界</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#哑变量" class="sidebar-link">哑变量</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据随机取样-排序" class="sidebar-link">数据随机取样(排序)</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#补充" class="sidebar-link">补充</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#pandas聚合与分组" class="sidebar-link">Pandas聚合与分组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-1-groupby函数-series分组" class="sidebar-link">数据分组操作(1)  (groupby函数 &amp; series分组)</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-2-datafrme分组" class="sidebar-link">数据分组操作(2)  (DataFrme分组)</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-3-分组指定应用聚合列" class="sidebar-link">数据分组操作(3)  分组指定应用聚合列</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-4-分组的迭代操作" class="sidebar-link">数据分组操作(4)  分组的迭代操作</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-5-对行索引名进行分组" class="sidebar-link">数据分组操作(5)  对行索引名进行分组</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-6-聚合函数" class="sidebar-link">数据分组操作(6)  聚合函数</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#数据分组操作-7-自定义聚合函数agg" class="sidebar-link">数据分组操作(7)  自定义聚合函数agg()</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#自定义聚合操作-分组转换与分组应用" class="sidebar-link">自定义聚合操作  分组转换与分组应用</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#通用的apply方法" class="sidebar-link">通用的apply方法</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#透视表与交叉表-透视表-pivot-table" class="sidebar-link">透视表与交叉表  透视表(Pivot Table)</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#透视表与交叉表-交叉表-cross-table" class="sidebar-link">透视表与交叉表  交叉表(Cross Table)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#seaborn-pandas-可视化" class="sidebar-link">Seaborn(Pandas)可视化</a></li><li class="sidebar-sub-header level2"><a href="/hdata-doc/pages/f2a341/#matplotlib可视化" class="sidebar-link">matplotlib可视化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#条形图" class="sidebar-link">条形图</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#条形图-2" class="sidebar-link">条形图</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#条形图-bar" class="sidebar-link">条形图 bar()</a></li><li class="sidebar-sub-header level4"><a href="/hdata-doc/pages/f2a341/#水平条形图-barh" class="sidebar-link">水平条形图 barh()</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#子图" class="sidebar-link">子图</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#饼图" class="sidebar-link">饼图</a></li><li class="sidebar-sub-header level3"><a href="/hdata-doc/pages/f2a341/#折线图-完整" class="sidebar-link">折线图(完整)</a></li></ul></li></ul></li><li><a href="/hdata-doc/pages/c2b99b/" class="sidebar-link">自己写的python程序（减少工作量）</a></li><li><a href="/hdata-doc/pages/f799c7/" class="sidebar-link">Python爬虫</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Shell</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/5704cc/" class="sidebar-link">Shell基础</a></li><li><a href="/hdata-doc/pages/5765cc/" class="sidebar-link">Shell命令行</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Scala</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/c917bd/" class="sidebar-link">语法学习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>正则表达式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/e4e158/" class="sidebar-link">正则基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/gxfmrs/" class="sidebar-link">前端相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>资料</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/e6d5cb/" class="sidebar-link">资料</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>杂记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/414e9c/" class="sidebar-link">常用工具或网站</a></li><li><a href="/hdata-doc/pages/c0e729/" class="sidebar-link">琐碎知识</a></li><li><a href="/hdata-doc/pages/378bb1/" class="sidebar-link">快捷键</a></li><li><a href="/hdata-doc/pages/3cec6c/" class="sidebar-link">FAQ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>摘录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hdata-doc/pages/AXI4oJ/" class="sidebar-link">摘录</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/hdata-doc/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>其他</span></li><li data-v-06225672><span data-v-06225672>Python</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/user-h" target="_blank" title="作者" class="beLink" data-v-06225672>Ai</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-02-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Python类库学习<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="基础语法"><a href="#基础语法" class="header-anchor">#</a> 基础语法</h2> <h2 id="numpy学习"><a href="#numpy学习" class="header-anchor">#</a> Numpy学习</h2> <h3 id="ndarray类学习"><a href="#ndarray类学习" class="header-anchor">#</a> Ndarray类学习</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># NumPy 参考手册 https://www.numpy.org.cn/reference/</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Ndarray类学习 (存放同类型元素的多维数组)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token triple-quoted-string string">&quot;&quot;&quot;
ndarray.ndim - 数组的轴（维度）的个数。在Python世界中，维度的数量被称为rank。
ndarray.shape - 数组的维度。这是一个整数的元组，表示每个维度中数组的大小。对于有 n 行和 m 列的矩阵，shape 将是 (n,m)。因此，shape 元组的长度就是rank或维度的个数 ndim。
ndarray.size - 数组元素的总数。这等于 shape 的元素的乘积。
ndarray.dtype - 一个描述数组中元素类型的对象。可以使用标准的Python类型创建或指定dtype。另外NumPy提供它自己的类型。例如numpy.int32、numpy.int16和numpy.float64。
ndarray.itemsize - 数组中每个元素的字节大小。例如，元素为 float64 类型的数组的 itemsize 为8（=64/8），而 complex32 类型的数组的 itemsize 为4（=32/8）。它等于 ndarray.dtype.itemsize 。
ndarray.data - 该缓冲区包含数组的实际元素。通常，我们不需要使用此属性，因为我们将使用索引访问数组中的元素
&quot;&quot;&quot;</span>
<span class="token comment"># order=&quot;C&quot; 行优先</span>
<span class="token comment"># arr1 = np.ndarray(shape=(2, 3), dtype = int, buffer=np.array([1,2,3,4,5,6,7]), offset=0, order=&quot;C&quot;)</span>
<span class="token comment"># arr1</span>

<span class="token comment"># order=&quot;F&quot; 列优先</span>
<span class="token comment"># arr2 = np.ndarray(shape=(2, 3), dtype = int, buffer=np.array([1,2,3,4,5,6,7]), offset=0, order=&quot;F&quot;)</span>
<span class="token comment"># arr2</span>

<span class="token comment"># offset=8 buffer中用于初始化数组的首个数据的偏移  (字节数的偏移 ndarray.itemsize为4 设置为8偏移两个值)</span>
arr3 <span class="token operator">=</span> np<span class="token punctuation">.</span>ndarray<span class="token punctuation">(</span>shape<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">buffer</span><span class="token operator">=</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> offset<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># arr3.itemsize</span>
arr3
</code></pre></div></details> <h3 id="np-array方法"><a href="#np-array方法" class="header-anchor">#</a> np.array方法</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
np.array只是一个便捷的函数,用来创建ndarray,
它本身并不是一个类
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> numpy <span class="token keyword">import</span> <span class="token operator">*</span>

arr4 <span class="token operator">=</span> array<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment"># arr4</span>
<span class="token comment"># print(arr4.T)</span>
<span class="token comment"># print(arr4.size)</span>
<span class="token comment"># print(arr4.itemsize)</span>
<span class="token comment"># print(arr4.ndim)</span>
<span class="token comment"># print(arr4.shape)</span>
<span class="token comment"># print(arr4.dtype)</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;通过常规类型创建array&quot;&quot;&quot;</span>
<span class="token comment"># 1.通过tuple创建array</span>
<span class="token comment"># yuanzu = (4, 5, 6)</span>
<span class="token comment"># arr5 = array(yuanzu)</span>
<span class="token comment"># print(arr5)</span>

<span class="token comment"># 2.通过list创建array</span>
<span class="token comment"># pylist = [0, 1, 2]</span>
<span class="token comment"># arr6 = array(pylist)</span>
<span class="token comment"># print(arr6)</span>

<span class="token comment"># 3.构建多维的array</span>
<span class="token comment"># pylist2 = [4, 5, 6]</span>
<span class="token comment"># arr7 = array( [pylist, pylist2] )</span>
<span class="token comment"># print(&quot;多维数组:\n&quot; + str(arr7))</span>

<span class="token comment"># 4.类型自动推断</span>
<span class="token comment"># arr8 = array( [1, 2, 3.3] )</span>
<span class="token comment"># print(arr8)</span>
<span class="token comment"># arr8 = array( [&quot;1&quot;, 2, 3] )</span>
<span class="token comment"># print(arr8)</span>

<span class="token comment"># 5.明确数组类型</span>
<span class="token comment"># arr9 = array([1, 3, 6, 9], dtype=float32)</span>
<span class="token comment"># arr9</span>
arr9 <span class="token operator">=</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>ubyte<span class="token punctuation">)</span>
arr9
</code></pre></div></details> <h3 id="numpy数组创建方法"><a href="#numpy数组创建方法" class="header-anchor">#</a> Numpy数组创建方法</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;Numpy数组创建方法&quot;&quot;&quot;</span>
<span class="token comment"># from numpy import *</span>

<span class="token comment"># 1. 全0数组</span>
<span class="token comment"># arr = zeros( (3, 4) ) # 二维全0数组</span>
<span class="token comment"># arr = zeros( (2,2,2) ) # 三维全0数组</span>

<span class="token comment"># 1.1 全1数组</span>
<span class="token comment"># arr = ones( (2, 3) )</span>

<span class="token comment"># 1.2 初始内容是随机的，取决于内存的状态</span>
arr <span class="token operator">=</span> empty<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment"># 1.2 全x数组</span>
<span class="token comment"># arr = full( (2, 3), 6 )</span>

<span class="token comment"># 1.3 根据步长创建数组arange(start, end, step)</span>
<span class="token comment"># arr = arange(0, 1, 0.1)</span>

<span class="token comment"># 2.等差数列</span>
<span class="token comment"># arr = linspace(0, 1, 10) # linspace(start, end, count, endpoint=True)</span>
<span class="token comment"># arr = linspace(0, 1, 10, endpoint=False)</span>

<span class="token comment"># 3.等比数列</span>
<span class="token comment"># arr = logspace(0, 10, 1, base=2) # logspace(start, end, count, base=10)</span>

arr
</code></pre></div></details> <h3 id="打印数组"><a href="#打印数组" class="header-anchor">#</a> 打印数组</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;打印数组&quot;&quot;&quot;</span>
<span class="token comment"># import sys</span>
<span class="token comment"># 一维数组打印为行，将二维数据打印为矩阵，将三维数据打印为矩数组表</span>
<span class="token comment"># arr = arange(10000)</span>

<span class="token comment"># 如果数组太大而无法打印，NumPy会自动跳过数组的中心部分并仅打印角点</span>
<span class="token comment"># arr.reshape(100, 100)</span>
<span class="token comment"># 禁用此行为并强制NumPy打印整个数组 更改打印选项set_printoptions</span>
<span class="token comment"># set_printoptions(threshold=sys.maxsize)</span>
<span class="token comment"># arr.reshape(100, 100)</span>
</code></pre></div></details> <h3 id="基本操作-数组元素的运算"><a href="#基本操作-数组元素的运算" class="header-anchor">#</a> 基本操作 (数组元素的运算)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;基本操作 (数组元素的运算)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

a <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;%s%s&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token string">&quot;数组a-数组b:\t&quot;</span><span class="token punctuation">,</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 数组相减</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;%s%s&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token string">&quot;数组b的2次方:\t&quot;</span><span class="token punctuation">,</span>b<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;%s%s&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token string">&quot;sin(a):\t&quot;</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;%s%s&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token string">&quot;数组a &lt; 35\t&quot;</span><span class="token punctuation">,</span>a <span class="token operator">&lt;</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="基本操作-矩阵乘积"><a href="#基本操作-矩阵乘积" class="header-anchor">#</a> 基本操作 (矩阵乘积)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;基本操作 (矩阵乘积)&quot;&quot;&quot;</span>
A <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;矩阵乘积:&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>A @ B<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;矩阵乘积:&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;
某些操作（例如+=和 *=）会更直接更改被操作的矩阵数组而不会创建新矩阵数组
&quot;&quot;&quot;</span>
A <span class="token operator">*=</span> <span class="token number">0</span>
A <span class="token operator">+=</span> <span class="token number">3</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span>
<span class="token comment"># A += B # 需要向上转换 TypeError: Cannot cast ufunc add output from dtype('float64') to dtype('int32') with casting rule 'same_kind'</span>
B <span class="token operator">+=</span> A
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;B += A:\n&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;一元操作&quot;&quot;&quot;</span>
<span class="token comment"># B.sum() # 所有元素的和</span>
<span class="token comment"># B.min() # 最小的元素</span>
<span class="token comment"># B.max() # 最大的元素</span>

<span class="token comment"># B.sum(axis=0) # sum of each column</span>
<span class="token comment"># B.min(axis=1) # min of each row</span>
<span class="token comment"># B.cumsum(axis=1) # 在每一行的累积 cumulative sum along each row</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
通函数
NumPy提供熟悉的数学函数，例如sin，cos和exp。在NumPy中，这些被称为“通函数”（ufunc）。在NumPy中，这些函数在数组上按元素进行运算，产生一个数组作为输出
&quot;&quot;&quot;</span>
</code></pre></div></details> <h3 id="形状操纵"><a href="#形状操纵" class="header-anchor">#</a> 形状操纵</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;形状操纵 0428&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 改变数组的形状</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment"># arr.ravel() # returns the array, flattened</span>
<span class="token comment"># arr.T</span>
<span class="token comment"># arr.reshape(6, -2)</span>

<span class="token comment"># 将不同数组堆叠在一起</span>
arr1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
arr2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># np.vstack( (arr1, arr2) ) # 沿第一轴[水平(按列顺序)]堆叠</span>
<span class="token comment"># np.row_stack( (arr1, arr2) )</span>
<span class="token comment"># np.hstack( (arr1, arr2) )   # 沿第二轴[垂直(按照行顺序)]堆叠</span>
<span class="token comment"># np.column_stack( (arr1, arr2) )</span>
<span class="token comment">## 在复杂的情况下，r_和 c_于通过沿一个轴堆叠数字来创建数组很有用。它们允许使用范围操作符(“：”)。</span>
<span class="token comment"># np.r_[1:6, 0, 4]</span>
<span class="token comment"># np.r_[arr1, arr2]</span>
<span class="token comment"># np.c_[arr1, arr2]</span>

<span class="token comment"># 复制堆叠  numpy.repeat(a, repeats, axis=None)</span>
<span class="token comment"># '''</span>
<span class="token comment">#     a(array_like): 输入数组。</span>
<span class="token comment">#     repeats(int or array of ints): 每个元素的重复次数。 重复播放以适合给定轴的形状</span>
<span class="token comment">#     axis(int, optional) 重复值所沿的轴。默认情况下，使用展平的输入数组，并返回展平的输出数组。</span>
<span class="token comment"># '''</span>
<span class="token comment"># np.repeat(a=3, repeats=4)</span>
<span class="token comment"># np.repeat(a=arr1, repeats=2)</span>
<span class="token comment"># np.repeat(a=arr1, repeats=2, axis=2)</span>

<span class="token comment"># '''title'''</span>

<span class="token comment"># 将一个数组拆分成几个较小的数组</span>
<span class="token comment"># np.hsplit(arr1, (2,2))</span>
<span class="token comment"># a = np.array([np.arange(1,13), np.arange(1,13)*10])</span>
<span class="token comment"># np.hsplit(a, 3) # 无论数组尺寸如何，数组始终沿第二轴分割</span>
<span class="token comment"># np.hsplit(a, (3, 6, 9)) # (第二个参数是切分的块??? 012 345 678 9-)</span>
<span class="token comment"># np.vsplit(a, 2) # 该阵列被始终沿第一轴线分裂不管阵列的尺寸</span>
<span class="token comment"># '''split split(array, splits,axis=1) 将数组拆分为大小相等的多个子数组</span>
<span class="token comment">#     numpy.array_split（ary，indexs_or_sections，axis = 0 ）</span>
<span class="token comment">#     array_split允许 indices_or_sections是整数，它不平分轴。对于应分为n个部分的长度为l的数组，它返回大小为l // n + 1的l％n个子数组，其余大小为l // n</span>
<span class="token comment"># '''</span>
<span class="token comment"># np.array_split(ary=arr1, indices_or_sections=2, axis= 2)</span>
arr3 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>arr<span class="token punctuation">,</span> arr<span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;arr3:\n&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># np.split(ary=arr3, indices_or_sections=arr3.shape[0], axis=0)</span>
</code></pre></div></details> <h3 id="索引、切片和迭代"><a href="#索引、切片和迭代" class="header-anchor">#</a> 索引、切片和迭代</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token triple-quoted-string string">&quot;&quot;&quot;索引、切片和迭代&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">'''
一维的数组可以进行索引、切片和迭代操作的，就像 列表 和其他Python序列类型一样。
'''</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 索引</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 切片</span>
<span class="token comment"># 迭代</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> arr<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
多维的数组每个轴可以有一个索引。这些索引以逗号分隔的元组给出：
'''</span>
arr <span class="token operator">=</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;第三行第一个元素:&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 索引</span>

<span class="token comment"># -1对应二维数组里的一维说的，但不包含最后一个一维数组；-2对应一维数组里的元素，不包含每个一维数组最后两个</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 切片</span>
<span class="token comment"># 迭代</span>
<span class="token keyword">for</span> elem <span class="token keyword">in</span> arr<span class="token punctuation">.</span>flat<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
    
arr
</code></pre></div></details> <h3 id="深入"><a href="#深入" class="header-anchor">#</a> 深入:</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;拷贝和视图&quot;&quot;&quot;</span>
<span class="token comment"># 完全不复制</span>
<span class="token comment"># 视图或浅拷贝</span>
<span class="token comment"># 深拷贝</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Less基础 广播（Broadcasting）规则&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;花式索引和索引技巧&quot;&quot;&quot;</span>
<span class="token comment"># 使用索引数组进行索引</span>
<span class="token comment"># 使用布尔数组进行索引</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">def</span> <span class="token function">mandelbrot</span><span class="token punctuation">(</span> h<span class="token punctuation">,</span>w<span class="token punctuation">,</span> maxit<span class="token operator">=</span><span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;用布尔索引生成Mandelbrot集的图像：&quot;&quot;&quot;</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Returns an image of the Mandelbrot fractal of size (h,w).&quot;&quot;&quot;</span>
    y<span class="token punctuation">,</span>x <span class="token operator">=</span> np<span class="token punctuation">.</span>ogrid<span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1.4</span><span class="token punctuation">:</span><span class="token number">1.4</span><span class="token punctuation">:</span>h<span class="token operator">*</span><span class="token number">1j</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">0.8</span><span class="token punctuation">:</span>w<span class="token operator">*</span><span class="token number">1j</span> <span class="token punctuation">]</span>
    c <span class="token operator">=</span> x<span class="token operator">+</span>y<span class="token operator">*</span><span class="token number">1j</span>
    z <span class="token operator">=</span> c
    divtime <span class="token operator">=</span> maxit <span class="token operator">+</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>z<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>maxit<span class="token punctuation">)</span><span class="token punctuation">:</span>
     z <span class="token operator">=</span> z<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> c
     diverge <span class="token operator">=</span> z<span class="token operator">*</span>np<span class="token punctuation">.</span>conj<span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token operator">**</span><span class="token number">2</span>            <span class="token comment"># who is diverging</span>
     div_now <span class="token operator">=</span> diverge <span class="token operator">&amp;</span> <span class="token punctuation">(</span>divtime<span class="token operator">==</span>maxit<span class="token punctuation">)</span>  <span class="token comment"># who is diverging now</span>
     divtime<span class="token punctuation">[</span>div_now<span class="token punctuation">]</span> <span class="token operator">=</span> i                  <span class="token comment"># note when</span>
     z<span class="token punctuation">[</span>diverge<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>                        <span class="token comment"># avoid diverging too much</span>

    <span class="token keyword">return</span> divtime
plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>mandelbrot<span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># ix_()函数</span>
<span class="token comment"># 使用字符串建立索引</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;线性代数 简单数组操作&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;“自动”整形&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;矢量堆叠&quot;&quot;&quot;</span>
</code></pre></div></details> <h3 id="深入-直方图"><a href="#深入-直方图" class="header-anchor">#</a> 深入: 直方图</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;直方图&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token comment"># Build a vector of 10000 normal deviates with variance 0.5^2 and mean 2</span>
mu<span class="token punctuation">,</span> sigma <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0.5</span>
v <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>mu<span class="token punctuation">,</span>sigma<span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span>
<span class="token comment"># Plot a normalized histogram with 50 bins</span>
plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>v<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> density<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>       <span class="token comment"># matplotlib version (plot)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Compute the histogram with numpy and then plot it</span>
<span class="token punctuation">(</span>n<span class="token punctuation">,</span> bins<span class="token punctuation">)</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>histogram<span class="token punctuation">(</span>v<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> density<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># NumPy version (no plot)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token number">.5</span><span class="token operator">*</span><span class="token punctuation">(</span>bins<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">+</span>bins<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="附-创建一个3-3-的数组方法"><a href="#附-创建一个3-3-的数组方法" class="header-anchor">#</a> 附:创建一个3*3 的数组方法</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 创建一个3*3 的数组, 下列代码错误的是</span>
<span class="token comment"># A:np.arange(9).reshape(3,3)</span>
<span class="token comment"># B:np.eye(3)</span>
<span class="token comment"># C:np.random.random([3,3,3])</span>
<span class="token comment"># D:np.mat(&quot;1 2 3;4 5 6;7 8 9&quot;)</span>
<span class="token comment"># 正确答案:C</span>

<span class="token comment"># arr = np.arange(9).reshape(3,3)</span>
<span class="token comment"># arr = np.eye(3) # 生成对角矩阵</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># arr = np.mat(&quot;1 2 3;4 5 6;7 8 9&quot;)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>
arr
</code></pre></div></details> <h2 id="pandas-两种数据结构学习"><a href="#pandas-两种数据结构学习" class="header-anchor">#</a> Pandas（两种数据结构学习）</h2> <h3 id="_1-series-一维标记数组-学习"><a href="#_1-series-一维标记数组-学习" class="header-anchor">#</a> 1.Series(一维标记数组)学习</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;pandas 简介:https://www.pypandas.cn/docs/getting_started/ &quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token triple-quoted-string string">&quot;&quot;&quot;Series(一维标记数组)学习&quot;&quot;&quot;</span>

<span class="token comment"># obj = pd.Series([1, 3, 5, np.nan, 6, &quot;ai&quot;])  # 默认下标0123</span>
obj <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 

<span class="token comment"># obj</span>
<span class="token comment"># obj.values # 返回Series的值 为ndarray类型</span>
<span class="token comment"># obj.index # 返回索引名称</span>

<span class="token triple-quoted-string string">'''series索引'''</span>
<span class="token comment"># 1.类似numpy索引方式</span>
<span class="token comment"># obj[2:6:2]</span>

<span class="token comment"># 2.index名称索引</span>
<span class="token comment"># obj[&quot;a&quot;] # 单个</span>
<span class="token comment"># obj[ [&quot;a&quot;, &quot;d&quot;, &quot;e&quot;] ] # 索引多个值,需要传入名称列表</span>
<span class="token comment"># obj[&quot;a&quot;:&quot;c&quot;] # 包括&quot;c&quot;</span>

<span class="token comment"># 3.通过布尔表达式索引</span>
<span class="token comment"># obj[obj&gt;=3]</span>

<span class="token triple-quoted-string string">'''series赋值'''</span>
<span class="token comment"># 1.单个值赋值</span>
<span class="token comment"># obj[2] = 9</span>

<span class="token comment"># 2.多个值赋值</span>
<span class="token comment"># obj[0:2] = [-9, -6]</span>

<span class="token comment"># 3.通过布尔表达式赋值</span>
obj<span class="token punctuation">[</span>obj<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>

obj
</code></pre></div></details> <h3 id="_2-dataframe-二维标记数据结构-学习"><a href="#_2-dataframe-二维标记数据结构-学习" class="header-anchor">#</a> 2.DataFrame(二维标记数据结构)学习</h3> <h4 id="创建"><a href="#创建" class="header-anchor">#</a> 创建</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token triple-quoted-string string">&quot;&quot;&quot;
    DataFrame( data, index, columns, dtype, copy)(二维标记数据结构)学习
    1. 像Series一样可以接收多种输入:lists、dicts、series和DataFrame等
    2.初始化对象时,除了数据还可以传index和columns这两个参数
    附:可以把DataFrame想象成一个电子表格，它由行名（index）、列名(columns)和数据(values)组成。
&quot;&quot;&quot;</span>

<span class="token comment"># 1.根据字典新建DataFrame</span>
<span class="token comment"># data = {</span>
<span class="token comment">#     'column_a':[1, 2, 3],</span>
<span class="token comment">#     'column_b':[4, 5, 6],</span>
<span class="token comment">#     'column_c':[7, 8, 9]</span>
<span class="token comment"># }</span>
<span class="token comment"># df = pd.DataFrame(data, index=['r1', 'r2', 'r3'])</span>

<span class="token comment"># 1.2.根据嵌套字典新建DataFrame</span>
<span class="token comment"># data = {</span>
<span class="token comment">#     'c1':{'r1':111, 'r2':122},</span>
<span class="token comment">#     'c2':{'r1':211, 'r2':222}</span>
<span class="token comment"># }</span>
<span class="token comment"># df = pd.DataFrame(data)</span>

<span class="token comment"># 2. 根据列表创建DataFrame</span>
<span class="token comment"># data = [</span>
<span class="token comment">#     [1111, 2222, 3333],</span>
<span class="token comment">#     [111, 222, 333],</span>
<span class="token comment">#     [11, 22, 33],</span>
<span class="token comment">#     [1, 2, 3]</span>
<span class="token comment"># ]</span>
<span class="token comment"># df = pd.DataFrame(data, columns=['c1', 'c2', 'c3'], index=['r1', 'r2', 'r3', 'r4'])</span>

<span class="token comment"># 3. DataFrame 和 ndarray 互操作</span>
<span class="token comment"># 3.1 用ndarray构造DataFrame</span>
narr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">2.2</span><span class="token punctuation">,</span> <span class="token number">3.3</span><span class="token punctuation">,</span> <span class="token number">4.4</span><span class="token punctuation">,</span> <span class="token number">5.5</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>narr<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'c1'</span><span class="token punctuation">,</span> <span class="token string">'c2'</span><span class="token punctuation">,</span> <span class="token string">'c3'</span><span class="token punctuation">,</span> <span class="token string">'c4'</span><span class="token punctuation">,</span> <span class="token string">'c5'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'r1'</span><span class="token punctuation">,</span> <span class="token string">'r2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 3.2 用DataFrame构造ndarray</span>
<span class="token comment">## narr2 = np.array(df)</span>
<span class="token comment"># narr2 = df.values</span>
<span class="token comment"># print(narr2)</span>

<span class="token comment">### end.输出</span>
<span class="token comment"># print(df.index)</span>
<span class="token comment"># print(df.columns)</span>
<span class="token comment"># print(df.values) # 返回值为ndarray类型</span>
<span class="token comment"># print(df.values.shape)</span>
<span class="token comment"># print(df.index.shape)</span>
df
</code></pre></div></details> <h4 id="dataframe值索引"><a href="#dataframe值索引" class="header-anchor">#</a> DataFrame值索引</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame值索引&quot;&quot;&quot;</span>


data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token number">1111</span><span class="token punctuation">,</span> <span class="token number">2222</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">,</span> <span class="token number">333</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'c1'</span><span class="token punctuation">,</span> <span class="token string">'c2'</span><span class="token punctuation">,</span> <span class="token string">'c3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'r1'</span><span class="token punctuation">,</span> <span class="token string">'r2'</span><span class="token punctuation">,</span> <span class="token string">'r3'</span><span class="token punctuation">,</span> <span class="token string">'r4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 1.列索引(DataFrame[column_name],返回对应列的所有值)</span>
<span class="token comment"># df['c1']</span>

<span class="token comment"># 2. 行索引(DataFrame.ix[index_name],返回对应行的所有值。返回值类型为Series。)</span>
<span class="token comment"># df.ix['r1'] # 注意这里是中括号,不是函数??? (被弃用????)</span>

<span class="token comment"># 3.DataFrame.loc[index_name，column_name],返回对应元素。</span>
<span class="token comment"># df.loc['r1'] # 行索引</span>
<span class="token comment"># df.loc[:, 'c1'] # 列索引</span>
<span class="token comment"># df.loc['r1', 'c1']</span>
<span class="token comment"># df.loc[ ['r1', 'r3'] ] # 返回值为DataFrame。</span>
<span class="token comment"># df.loc['r1': 'r3', 'c2'] # 切片 包括起始和结束</span>
<span class="token comment"># df.loc[ df['c1']&gt;100, ['c2'] ] # 有条件的返回布尔序列 + 指定列</span>
<span class="token comment"># df[df&gt;100] # bool值的索引方法</span>

<span class="token comment"># 3.1 设定值 (实质上是给索引赋值??)</span>
<span class="token comment"># df.loc[df['c1']&gt;100, ['c2'] ] = 2000</span>
<span class="token comment"># df</span>

<span class="token comment"># 4.DataFrame.iloc[x，y],返回对应元素。</span>
    <span class="token comment"># 参数(整数 # df.iloc[0] # 整数  具有整数的切片对象,例如1:7  布尔数组  一个callable带有一个参数的函数（调用Series或DataFrame）)</span>
<span class="token comment"># df.iloc[0] # 整数</span>
<span class="token comment"># df.iloc[ [0, 1] ] # df.iloc[0] # 整数</span>
<span class="token comment"># df.iloc[ 0:3:2 ] # 切片对象</span>
<span class="token comment"># df.iloc[[True, False, True, True]] # 布尔掩码与索引的长度相同</span>

<span class="token comment"># df = pd.DataFrame(data, columns=['c1', 'c2', 'c3'])</span>
<span class="token comment"># df.iloc[lambda x: x.index % 2 == 0]</span>
</code></pre></div></details> <h4 id="层次化索引与unstack"><a href="#层次化索引与unstack" class="header-anchor">#</a> 层次化索引与unstack</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;层次化索引与unstack&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
层次化索引可以在一个轴上拥有多个索引级别。也就是以低维度形式处理高维度数据。
unstack()函数可以将层次化series转换成高维的DataFrame。
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># data # 两层索引</span>
data<span class="token punctuation">.</span>unstack<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h4 id="dataframe堆叠"><a href="#dataframe堆叠" class="header-anchor">#</a> DataFrame堆叠</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame堆叠 (shape相同)  [DataFrame表有行和列标签，因此堆叠时shape可以不一致]&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># concat([pd1,pd2],axis=0,ignore_index=False)</span>
<span class="token comment"># print( pd.concat([df, df2]) )</span>
<span class="token comment"># pd.concat([df, df2], ignore_index=False) # 纵向堆叠时，忽略索引名</span>
pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>df<span class="token punctuation">,</span> df2<span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># 横向堆叠</span>

<span class="token comment"># frame = pd.DataFrame({'b': [4, 7, -3, 2], 'a': [0, 1, 0, 1]})</span>
<span class="token comment"># print('值排序1  :\n',   frame.sort_index(by='b', axis=0))</span>
<span class="token comment"># frame</span>
</code></pre></div></details> <h4 id="dataframe常用函数介绍-一-重新索引-reindex"><a href="#dataframe常用函数介绍-一-重新索引-reindex" class="header-anchor">#</a> DataFrame常用函数介绍(一) 重新索引(reindex)</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame常用函数介绍(一) 重新索引(reindex)&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
    参数DataFrame.reindex(self, 
                labels=None, index=None, columns=None, axis=None, 
                method=None, copy=True, level=None, fill_value=nan, limit=None, tolerance=None)
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>reindex<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅲ'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fill_value<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">)</span>
</code></pre></div></details> <h4 id="dataframe常用函数介绍-二-丢弃值-drop"><a href="#dataframe常用函数介绍-二-丢弃值-drop" class="header-anchor">#</a> DataFrame常用函数介绍(二) 丢弃值(drop)</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame常用函数介绍(二) 丢弃值(drop) [Ⅰ, Ⅱ, Ⅲ, Ⅳ, Ⅴ, Ⅵ, Ⅶ, Ⅷ, Ⅸ, Ⅹ]&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
    参数DataFrame.drop(self, labels=None, axis=0, index=None, 
    columns=None, level=None, inplace=False, errors='raise')
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                  index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅲ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅳ'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># df.drop(index='Ⅲ', axis=0) # 删除行 (返回新对象)</span>
<span class="token comment"># df.drop(columns='b', axis=1) # 删除列 (返回新对象)</span>
<span class="token comment"># 参数 DataFrame.dropna(self, axis=0, how='any', thresh=None, subset=None, inplace=False)</span>
<span class="token comment"># df.dropna() # 清除有空值(NaN)的行</span>
df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>how<span class="token operator">=</span><span class="token string">'all'</span><span class="token punctuation">)</span> <span class="token comment"># 清除全为空的行(axis=1的列)</span>
df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>subset<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'列名'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 某列为空删除这一行</span>
<span class="token comment"># df</span>
</code></pre></div></details> <h4 id="dataframe常用函数介绍-三-算术方法"><a href="#dataframe常用函数介绍-三-算术方法" class="header-anchor">#</a> DataFrame常用函数介绍(三) 算术方法</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame常用函数介绍(三) 算术方法&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
    参数:add(self, other, axis='columns', level=None, fill_value=None)
    sub(self, other, axis='columns', level=None, fill_value=None)
    div(self, other, axis='columns', level=None, fill_value=None)
    sub(self, other, axis='columns', level=None, fill_value=None)
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅲ'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># df + df2</span>
<span class="token comment"># df.add(df2)</span>
df<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div></details> <h4 id="dataframe常用函数介绍-四-索引排序"><a href="#dataframe常用函数介绍-四-索引排序" class="header-anchor">#</a> DataFrame常用函数介绍(四) 索引排序</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame常用函数介绍(四) 索引排序&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
    DataFrame.sort_index(self, axis=0, level=None, ascending=True, inplace=False, 
        kind='quicksort', na_position='last', sort_remaining=True, ignore_index: bool = False)
&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span><span class="token number">5.5</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                  index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅲ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅳ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># print(df)</span>
<span class="token comment"># df.sort_index() # 按索引排序</span>
<span class="token comment"># df.sort_index(by=['a', 'b']) # 不推荐使用sort_index的参数，请使用.sort_values（by = ...）</span>
<span class="token comment"># df.sort_index(axis = 1, ascending=False) # 按照列索引名降序排序</span>
df<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span>axis <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment"># df.sort_values(by=[ 'a']) # 按值排序</span>
</code></pre></div></details> <h4 id="dataframe常用函数介绍-五-描述和汇总统计-待补充"><a href="#dataframe常用函数介绍-五-描述和汇总统计-待补充" class="header-anchor">#</a> DataFrame常用函数介绍(五) 描述和汇总统计(待补充)</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame常用函数介绍(五) 描述和汇总统计(补充)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'b'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>cov<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 协方差计算方法，series需要通过参数传入</span>
df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 相关系数计算方法，series需要通过参数传入</span>
</code></pre></div></details> <h4 id="dataframe常用函数介绍-六-缺失值填充"><a href="#dataframe常用函数介绍-六-缺失值填充" class="header-anchor">#</a> DataFrame常用函数介绍(六) 缺失值填充</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;DataFrame常用函数介绍(六) 缺失值填充&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span><span class="token number">5.5</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                  index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Ⅲ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅳ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅰ'</span><span class="token punctuation">,</span> <span class="token string">'Ⅱ'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># print(df)</span>
<span class="token comment"># df.fillna(0) # 全填为0</span>
<span class="token comment"># df.fillna({'b':666, 'c':999}) # 参数为字典类型 不同列填充不同值</span>
df<span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 列平均值填充列对应的NaN值</span>
</code></pre></div></details> <h4 id="pandas文件读取"><a href="#pandas文件读取" class="header-anchor">#</a> Pandas文件读取</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;文件读取&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># filepath = 'data\music.csv'</span>
filepath <span class="token operator">=</span> <span class="token string">'data\sales-副本.csv'</span> <span class="token comment"># 含中文的文件 65行</span>

<span class="token comment"># 1.read_csv方法</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> 
                 encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">,</span> 
                 names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'发票id'</span><span class="token punctuation">,</span> <span class="token string">'销售日期'</span><span class="token punctuation">,</span> <span class="token string">'总金额'</span><span class="token punctuation">,</span> <span class="token string">'支付金额'</span><span class="token punctuation">,</span> <span class="token string">'收银员'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment"># 指定列名,不使用第一行作为列名</span>
                 skiprows<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment"># 忽略指定列</span>
<span class="token comment">#                  na_values=['NULL'], # 显示空值</span>
<span class="token comment">#                  nrows=12, # 文件大时 设置读取行</span>
<span class="token comment">#                  chunksize=4 # 每次读取4行</span>
                <span class="token punctuation">)</span> 

<span class="token comment"># 1.1使用chunksize=4参数,读取后的数据类型为TextFileReader</span>
<span class="token comment"># for ele in df:</span>
<span class="token comment">#     print(ele)</span>

<span class="token comment"># 2.read_table方法</span>
<span class="token comment"># df = pd.read_table(filepath, sep=',', encoding='gbk')</span>
<span class="token comment"># print(&quot;Dataframe的形状&quot; + str(df.shape))</span>
df

<span class="token comment"># df.fillna(&quot;空值&quot;)</span>
</code></pre></div></details> <h4 id="pandas文件写入"><a href="#pandas文件写入" class="header-anchor">#</a> Pandas文件写入</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;文件写入&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token comment"># import sys</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'NaN'</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">39</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token string">'NULL'</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># df</span>
filepath <span class="token operator">=</span> <span class="token string">'data\pfile_test.csv'</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token comment"># sys.stdout, # 输出到控制台</span>
          na_rep<span class="token operator">=</span><span class="token string">'non'</span><span class="token punctuation">,</span> <span class="token comment"># 存储空值</span>
          sep<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">,</span> <span class="token comment"># 设置分隔符</span>
          index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token comment"># 不存储索引(index)</span>
          header<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token comment"># 不存储列名</span>
<span class="token comment">#           columns=[0, 1] # 设置只保存 某些列</span>
         <span class="token punctuation">)</span>
</code></pre></div></details> <h4 id="pandas合并xls文件"><a href="#pandas合并xls文件" class="header-anchor">#</a> Pandas合并xls文件</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> os

file_path <span class="token operator">=</span> <span class="token string">&quot;D:\\software\\pythonProjects\\weibospider\\weibospider\\spiders\\data\\weibo&quot;</span>
file_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>file_path<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span> <span class="token operator">+</span> i <span class="token keyword">for</span> i <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">]</span>'

li<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> file_list<span class="token punctuation">:</span>
    li<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
writer <span class="token operator">=</span> pd<span class="token punctuation">.</span>ExcelWriter<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>file_path<span class="token punctuation">}</span></span><span class="token string">\微博.xlsx'</span></span><span class="token punctuation">)</span>
pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">.</span>to_excel<span class="token punctuation">(</span>writer<span class="token punctuation">,</span><span class="token string">'Sheet1'</span><span class="token punctuation">,</span>index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
 
writer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="pandas数据合并、清洗"><a href="#pandas数据合并、清洗" class="header-anchor">#</a> Pandas数据合并、清洗</h2> <h3 id="merge函数-默认内连接"><a href="#merge函数-默认内连接" class="header-anchor">#</a> merge函数 默认内连接</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token triple-quoted-string string">&quot;&quot;&quot;merge函数 默认内连接&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;1.内连接(默认) how = 'inner'&quot;&quot;&quot;</span>
<span class="token comment"># 1.1 按 相同列名 内连接</span>
<span class="token comment"># df1 = pd.DataFrame({'key':['b','b','a','c'], 'data1':range(4)})</span>
<span class="token comment"># df2 = pd.DataFrame({'key':['a','b','d'], 'data2':range(3)})</span>
<span class="token comment"># df3 = pd.merge(df1, df2, on = 'key', how = 'inner')</span>

<span class="token comment"># 1.2 没有同名列 (相当于把参数on= 变为 left_on 和 right_on两个参数)</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key1'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'data1'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key2'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'data1'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> left_on<span class="token operator">=</span><span class="token string">'key1'</span><span class="token punctuation">,</span> right_on<span class="token operator">=</span><span class="token string">'key2'</span><span class="token punctuation">)</span>

<span class="token comment"># print(f&quot;{df1}\n{df2}&quot;)</span>
df3
</code></pre></div></details> <h3 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h3> <h4 id="外连接-2"><a href="#外连接-2" class="header-anchor">#</a> 外连接</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token triple-quoted-string string">&quot;&quot;&quot; 2.外连接 &quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">''' 1.how  2.多列连接on=[] 3.区分相同列名suffixes= 4.索引名连接right_index=True'''</span>
<span class="token comment"># 2.1.1  how = 'outer'</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'data1'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'data2'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span>df2<span class="token punctuation">,</span>how<span class="token operator">=</span><span class="token string">'outer'</span><span class="token punctuation">)</span>

<span class="token comment"># print(f&quot;{df1}\n{df2}&quot;)</span>
df3
</code></pre></div></details> <h4 id="多列连接on"><a href="#多列连接on" class="header-anchor">#</a> 多列连接on=[]</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 2.1.2 多列连接on=[]</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lval'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'rval'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'outer'</span><span class="token punctuation">,</span>on<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 2.1.3 非连接列有重名时指定后缀</span>
<span class="token comment"># df3 = pd.merge(df1, df2, how='outer',on='k1', suffixes=['_x', '_y'])</span>

<span class="token comment"># print(f&quot;{df1}\n{df2}&quot;)</span>
df3
</code></pre></div></details> <h4 id="左连接-how-left"><a href="#左连接-how-left" class="header-anchor">#</a> 左连接 how = 'left'</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 2.2</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'data1'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'data2'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># 2.2 左连接 how = 'left'</span>
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> on <span class="token operator">=</span> <span class="token string">'key'</span><span class="token punctuation">,</span> how <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">)</span>

<span class="token comment"># print(f&quot;{df1}\n{df2}&quot;)</span>
df3
</code></pre></div></details> <h4 id="how-right"><a href="#how-right" class="header-anchor">#</a> how = 'right'</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 2.2</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'data1'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'data2'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 2.3 右连接 how = 'right'</span>
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> on <span class="token operator">=</span> <span class="token string">'key'</span><span class="token punctuation">,</span> how <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">)</span>

<span class="token comment"># print(f&quot;{df1}\n{df2}&quot;)</span>
df3
</code></pre></div></details> <h3 id="用表的行索引名作为连接"><a href="#用表的行索引名作为连接" class="header-anchor">#</a> 用表的行索引名作为连接</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token comment"># 2.4.1 用表的行索引名作为连接</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'val'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> left_on<span class="token operator">=</span><span class="token string">'key'</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'outer'</span><span class="token punctuation">)</span>
df3 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> left_on<span class="token operator">=</span><span class="token string">'key'</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'outer'</span><span class="token punctuation">)</span>

<span class="token comment"># print(f&quot;{df1}\n{df2}&quot;)</span>
df3
</code></pre></div></details> <h3 id="join函数-为merge的特例-默认外连接"><a href="#join函数-为merge的特例-默认外连接" class="header-anchor">#</a> join函数(为merge的特例) 默认外连接</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token triple-quoted-string string">&quot;&quot;&quot;join函数(为merge的特例) 默认外连接&quot;&quot;&quot;</span>

df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key1'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'data1'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'key2'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'data2'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 两种方式相当</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span>left_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df1<span class="token punctuation">.</span>join<span class="token punctuation">(</span>df2<span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'inner'</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="combine-first函数-以一个为基准-另一个进行补充"><a href="#combine-first函数-以一个为基准-另一个进行补充" class="header-anchor">#</a> combine_first函数  以一个为基准,另一个进行补充</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np


<span class="token triple-quoted-string string">&quot;&quot;&quot;combine_first函数  以一个为基准,另一个进行补充&quot;&quot;&quot;</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 体会两者的区别</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df1<span class="token punctuation">.</span>combine_first<span class="token punctuation">(</span>df2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># df1值为NaN的位置，由df2来填充</span>
df2<span class="token punctuation">.</span>combine_first<span class="token punctuation">(</span>df1<span class="token punctuation">)</span> <span class="token comment"># 以df2为准，用df1补空</span>
</code></pre></div></details> <h3 id="待补充"><a href="#待补充" class="header-anchor">#</a> 待补充</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
pd.concat与np.concatenate对比
pd.concat与pd.merge与join
Concat忽略索引
&quot;&quot;&quot;</span>
</code></pre></div></details> <h3 id="数据清理与转换-一-值替换"><a href="#数据清理与转换-一-值替换" class="header-anchor">#</a> 数据清理与转换(一) 值替换</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(一) 值替换&quot;&quot;&quot;</span>

<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理--值替换&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">''' 1. df.fillna()方法[对NaN值进行填充] '''</span>
df <span class="token operator">=</span>  pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span> <span class="token comment"># 打印原始值</span>

<span class="token comment"># 1.1 全部填充为0</span>
<span class="token comment"># df.fillna(0)</span>

<span class="token comment"># 1.2 填充为列平均值</span>
<span class="token comment"># df.fillna(df.mean())</span>

<span class="token comment"># 1.3 不同列采用不同填充</span>
<span class="token comment"># df.fillna({0:0.0, 1:1.1, 2:2.2, 3:3.3})</span>

<span class="token triple-quoted-string string">''' 
2.df.replace()方法,对不同值(比如0, -1, NaN)进行填充 
    附:df.replace(np.nan, 0) 相当于 df.fillna(0)
'''</span>
<span class="token comment"># 2.1 把多个值[np.nan, 0] 替换为 -1</span>
<span class="token comment"># df.replace([np.nan, 0], -1)</span>

<span class="token comment"># 2.2 把多个值 替换为 多个值</span>
df<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token punctuation">[</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="数据清理与转换-二-去重复值"><a href="#数据清理与转换-二-去重复值" class="header-anchor">#</a> 数据清理与转换(二) 去重复值</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(二) 去重复值&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment"># print(df1)</span>

<span class="token comment"># 1 duplicated()函数 [找出重复记录]</span>
<span class="token comment"># df1.duplicated()</span>
<span class="token comment"># 2.1 drop_duplicates()函数 [直接剔除对应的重复记录]</span>
<span class="token comment"># df1.drop_duplicates()</span>
<span class="token comment"># 2.2以列为单位比较是否存在重复记录[默认行为单位]</span>
df1<span class="token punctuation">.</span>drop_duplicates<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div></details> <h3 id="数据清理与转换-三-索引重命名"><a href="#数据清理与转换-三-索引重命名" class="header-anchor">#</a> 数据清理与转换(三) 索引重命名</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(三) 索引重命名&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 1.df.rename(index={},columns={})方法</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1111</span><span class="token punctuation">,</span> <span class="token number">2222</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">,</span> <span class="token number">4444</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">,</span> <span class="token number">333</span><span class="token punctuation">,</span> <span class="token number">444</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># print(df1)</span>

df1<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token string">'row_1'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token string">'row_2'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token string">'row_3'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token string">'col_1'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token string">'col_2'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token string">'col_3'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span><span class="token string">'col_4'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="数据清理与转换-四-数据转换"><a href="#数据清理与转换-四-数据转换" class="header-anchor">#</a> 数据清理与转换(四) 数据转换</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(四) 数据转换&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token triple-quoted-string string">'''函数转换 map(Func)函数'''</span>
<span class="token comment"># 1. 替换fillna replace(见前面)</span>
<span class="token comment"># 2. map(Func)函数 [内部值进行函数转换。如统一字符的大小写等]</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;course&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">&quot;Chinese&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;math&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;English&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;physics&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;chemistry&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;biologic&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                    <span class="token string">&quot;score&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">94</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># 2.1第一列转换为首字母大写</span>
<span class="token comment"># df1['course'] = df1['course'].map(str.title) # upper</span>

<span class="token triple-quoted-string string">'''映射转换 map(Func)函数'''</span>
<span class="token comment"># 1.根据字典的映射进行相应转换</span>
course <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;Chinese&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;语文&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;math&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;数学&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;English&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;英语&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;physics&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;物理&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;chemistry&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;化学&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;biologic&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;生物&quot;</span><span class="token punctuation">}</span>
df1<span class="token punctuation">[</span><span class="token string">'course'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df1<span class="token punctuation">[</span><span class="token string">'course'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>course<span class="token punctuation">)</span>

df1
</code></pre></div></details> <h3 id="数据清理与转换-五-数据离散化和装箱-指定划分边界"><a href="#数据清理与转换-五-数据离散化和装箱-指定划分边界" class="header-anchor">#</a> 数据清理与转换(五) 数据离散化和装箱 指定划分边界</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(五) 数据离散化和装箱&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token triple-quoted-string string">&quot;&quot;&quot;
    数值类型  1.连续值:一定区间可连续取值(比如天气的温度)  2.离散值:按一定顺序一一列举(比如'多云','晴天','雨天','阴天')
    Categoricals:  1.是 pandas 的一种数据类型,是由固定的且有限数量的离散变量组成的 2.不能排序(sort_by): 顺序是创建时手工设定的，是静态的
&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">'''指定划分边界  cut()函数[实现数据装箱bin(连续-&gt;离散)。返回一个Categorical对象]'''</span>
<span class="token comment"># arr = np.arange(0, 100, 7)</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token comment"># 生成在半开半闭区间[low,high)上离散均匀分布的整数值</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;arr:</span><span class="token interpolation"><span class="token punctuation">{</span>arr<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
bins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span>
cats <span class="token operator">=</span> pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> bins<span class="token punctuation">)</span>
<span class="token comment"># cats </span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;编号:</span><span class="token interpolation"><span class="token punctuation">{</span>cats<span class="token punctuation">.</span>codes<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span> <span class="token comment"># 从0开始生成编号,不在范围内为-1</span>

<span class="token comment"># 把array转换为DataFrame</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;矩阵:\n</span><span class="token interpolation"><span class="token punctuation">{</span>df1<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>

df1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>df1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bins<span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>codes
df1
</code></pre></div></details> <h3 id="数据清理与转换-五-数据离散化和装箱-平均划分边界"><a href="#数据清理与转换-五-数据离散化和装箱-平均划分边界" class="header-anchor">#</a> 数据清理与转换(五) 数据离散化和装箱 平均划分边界</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(五) 数据离散化和装箱&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token triple-quoted-string string">'''平均划分边界  cut()函数 可以通过数值平均等分(平均数)自动划分并装箱'''</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
cats <span class="token operator">=</span> pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment"># print(f&quot;装箱后矩阵:\n{cats.codes.reshape(3, 6)}&quot;)</span>

df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df1<span class="token punctuation">)</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> cats<span class="token punctuation">.</span>codes<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token comment"># cats</span>
</code></pre></div></details> <h3 id="数据清理与转换-五-数据离散化和装箱-分位划分边界"><a href="#数据清理与转换-五-数据离散化和装箱-分位划分边界" class="header-anchor">#</a> 数据清理与转换(五) 数据离散化和装箱 分位划分边界</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据清理与转换(五) 数据离散化和装箱&quot;&quot;&quot;</span>

<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token triple-quoted-string string">'''分位划分边界  qcut(data,count) 使用中位数来划分数据并装箱'''</span>
arr <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
cats <span class="token operator">=</span> pd<span class="token punctuation">.</span>qcut<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment"># print(f&quot;装箱后矩阵:\n{cats.codes.reshape(3, 6)}&quot;)</span>

df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> arr<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;随机矩阵:</span><span class="token interpolation"><span class="token punctuation">{</span>df1<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;cats:</span><span class="token interpolation"><span class="token punctuation">{</span>cats<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> cats<span class="token punctuation">.</span>codes<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

</code></pre></div></details> <h3 id="哑变量"><a href="#哑变量" class="header-anchor">#</a> 哑变量</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
哑变量(可以提高运算速度) 哑变量(dummy variable)是指用0或1表示某个类别是否出现
1. 有N种互斥属性时，哑变量需要引入N-1个变量，独热编码需要N个变量
2. get_dummies(drop_first=True)为真正哑变量，默认的drop_first=False为独热编码

&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># 独热编码</span>
<span class="token comment"># pd.get_dummies(df1['key'])</span>

<span class="token comment"># 哑变量</span>
pd<span class="token punctuation">.</span>get_dummies<span class="token punctuation">(</span>df1<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> drop_first<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 连接哑变量</span>
</code></pre></div></details> <h3 id="数据随机取样-排序"><a href="#数据随机取样-排序" class="header-anchor">#</a> 数据随机取样(排序)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据随机取样&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 1.随机排序</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment"># sampler = np.random.permutation(6) # 生成随机序列</span>
<span class="token comment"># df1.take(sampler) # 以随机序列为行索引,重新排序后输出</span>

<span class="token comment"># 2.随机下采样 [随机排序后,取前n行]</span>
sampler <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>permutation<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>df1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment"># simpler = array([x, x, x])</span>

<span class="token comment"># 3.随机上采样 [样本较少时,扩大样本(),再取样]</span>
<span class="token comment">## 生成12个元素在0 - 6范围内的数组(正态)</span>
<span class="token comment"># sampler = np.random.randint(0, len(df1), size=2*len(df1))</span>

df1<span class="token punctuation">.</span>take<span class="token punctuation">(</span>sampler<span class="token punctuation">)</span>
<span class="token comment"># sampler</span>
</code></pre></div></details> <h3 id="补充"><a href="#补充" class="header-anchor">#</a> 补充</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;字符串操作&quot;&quot;&quot;</span>

<span class="token comment"># 打印内置方法和属性</span>
<span class="token comment"># dir(): 返回参数的属性、方法列表</span>
<span class="token comment"># dir(&quot;&quot;)</span>

<span class="token comment"># 编码解码</span>
<span class="token comment"># &quot;你好&quot;.encode()</span>
<span class="token string">b'\xe4\xbd\xa0\xe5\xa5\xbd'</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>


<span class="token triple-quoted-string string">&quot;&quot;&quot;老师的代码&quot;&quot;&quot;</span>

<span class="token comment"># 前缀使用</span>
df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'lie1'</span><span class="token punctuation">,</span><span class="token string">'lie2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
df1<span class="token operator">=</span>pd<span class="token punctuation">.</span>get_dummies<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'lie1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>prefix<span class="token operator">=</span><span class="token string">'lie1'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df1<span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
一个对统计应用有用的秘诀是：结合get_dummies和cut之类的离散化函数
'''</span>
<span class="token comment">#正态分布是个数值</span>
data<span class="token operator">=</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token comment"># [0.01472476 0.21786879 0.80685543 0.33888554 0.28585739 0.03260082</span>
<span class="token comment">#  0.86698275 0.86326211 0.36818782 0.04061498]</span>
 
<span class="token comment">#设置面元</span>
bins<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
 
<span class="token comment">#面元划分</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>data<span class="token punctuation">,</span>bins<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># [0.09044921 0.34034557 0.16417927 0.45625488 0.05030981 0.26397673</span>
<span class="token comment">#  0.93966121 0.17444847 0.19196159 0.48356917]</span>
<span class="token comment"># [(0.0, 0.2], (0.2, 0.4], (0.0, 0.2], (0.4, 0.6], (0.0, 0.2], (0.2, 0.4], (0.8, 1.0], (0.0, 0.2], (0.0, 0.2], (0.4, 0.6]]</span>
<span class="token comment"># Categories (5, interval[float64]): [(0.0, 0.2] &lt; (0.2, 0.4] &lt; (0.4, 0.6] &lt; (0.6, 0.8] &lt; (0.8, 1.0]]</span>
<span class="token comment">#    (0.0, 0.2]  (0.2, 0.4]  (0.4, 0.6]  (0.6, 0.8]  (0.8, 1.0]</span>
 
<span class="token comment">#哑变量</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span>get_dummies<span class="token punctuation">(</span>pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>data<span class="token punctuation">,</span>bins<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="pandas聚合与分组"><a href="#pandas聚合与分组" class="header-anchor">#</a> Pandas聚合与分组</h2> <h3 id="数据分组操作-1-groupby函数-series分组"><a href="#数据分组操作-1-groupby函数-series分组" class="header-anchor">#</a> 数据分组操作(1)  (groupby函数 &amp; series分组)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(1)  (groupby函数 &amp; series分组)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 1.groupy()函数返回一个GroupBy对象,此对象没有做任何计算，只生成符合分组条件的中间数据，当执行apply方法时才进行真正的计算</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span><span class="token punctuation">:</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'v2'</span><span class="token punctuation">:</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''单列分组'''</span>
<span class="token comment"># grouped = df['v1'].groupby(df['k1'])</span>

<span class="token triple-quoted-string string">'''多列分组 (多层次索引的Series,可转化为DataFeame)'''</span>
grouped <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># grouped # 显示GroupBy对象</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span> <span class="token comment"># 打印df</span>

<span class="token comment"># GroupBy对象在执行apply方法时，才会进行真正的计算和组合</span>
<span class="token comment">## 如:在GroupBy对象上应用求平均的应用，并聚合输出一个新的Series</span>
<span class="token comment"># grouped.mean()</span>
pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>grouped<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 多层索引Series转化为DataFrame</span>
</code></pre></div></details> <h3 id="数据分组操作-2-datafrme分组"><a href="#数据分组操作-2-datafrme分组" class="header-anchor">#</a> 数据分组操作(2)  (DataFrme分组)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(2)  (DataFrme分组)&quot;&quot;&quot;</span>
<span class="token comment"># np.array?? # help(np.array) # 查看方法详细信息</span>

<span class="token comment"># DataFrame数据表对象，使用groupby()函数，指定分组的列，即可对数据表其它列进行应用和聚合</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
<span class="token comment"># 1. 单列分组</span>
<span class="token comment"># 当被分组并应用汇聚的列，无法进行应用汇聚时，则直接丢弃(比如k2列为字符串,不能进行mean求平均值)</span>
<span class="token comment"># df.groupby('k1').mean()</span>

<span class="token comment"># 2.多列分组</span>
<span class="token comment"># df.groupby(['k1', 'k2']).mean()</span>

<span class="token comment"># 3.多列分组—去除分组索引</span>
<span class="token comment">## 在多列分组的情况下，新生成的数据表会有多层次化索引，有的时候我们不需要这些索引，而是要将他们变成新的数据列</span>
<span class="token comment"># df.groupby(['k1', 'k2'], as_index=False).mean()</span>

<span class="token comment"># 4.自定义分组</span>
<span class="token comment"># 如果我们不按照数据表中某列来分组，先自己定义分组的规则。这时，可以通过传入自定义列表传入groupby参数，按照列表数据规则进行分组</span>
<span class="token comment"># df.groupby(['A', 'A', 'A', 'B']).mean()</span>
<span class="token comment"># df.groupby(['1', '1', '2', '0']).mean()</span>

<span class="token comment"># 5.多列分组—求和</span>
<span class="token comment"># df.groupby(['1', '1', '2', '0']).sum()</span>

<span class="token comment"># 6.多列分组—最大值</span>
<span class="token comment"># df.groupby(['k1', 'k2']).max()</span>

<span class="token comment"># 7.多列分组—中位数</span>
<span class="token comment"># df.groupby(['k1', 'k2']).median()</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="数据分组操作-3-分组指定应用聚合列"><a href="#数据分组操作-3-分组指定应用聚合列" class="header-anchor">#</a> 数据分组操作(3)  分组指定应用聚合列</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(3)  分组指定应用聚合列&quot;&quot;&quot;</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>

<span class="token comment"># 1.指定单列 (运行没好使)</span>
<span class="token comment">## 使用groupby()函数对DataFrame数据表进行分组时，可以指定方法应用和聚合的单列，并返回Series对象。series.groupby([“column_name”,”column_name”]).mean()</span>
<span class="token comment"># df['v1'].groupby(['k1', 'k2']).mean()</span>

<span class="token comment"># 1.2 指定单列—语法糖 (计算机语言中添加的某种语法，这种语法对语言的功能并没有影响，但是更方便程序员使用)</span>
<span class="token comment">## 什么是语法糖:https://www.jianshu.com/p/777b10385524</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'v1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 2.指定多列 (运行没好使)</span>
<span class="token comment"># df[['v1','v2']].groupby(['k1', 'k2']).mean()</span>

<span class="token comment"># 2.1 指定多列—语法糖</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="数据分组操作-4-分组的迭代操作"><a href="#数据分组操作-4-分组的迭代操作" class="header-anchor">#</a> 数据分组操作(4)  分组的迭代操作</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(4)  分组的迭代操作&quot;&quot;&quot;</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># print(df)</span>

<span class="token comment"># 对不同分组进行不同处理,对GroupBy对象进行迭代,在迭代中处理各个分组</span>
<span class="token comment"># 1.输出分组</span>
<span class="token comment"># for name, group in df.groupby('k1'):</span>
<span class="token comment">#     print(&quot;name:&quot; + name)</span>
<span class="token comment">#     print(group)</span>

<span class="token comment"># 2.</span>
<span class="token comment"># for [k1, k2],group in df.groupby(['k1', 'k2']):</span>
<span class="token comment">#     print(f'({k1}, {k2}):\n{group}')</span>

<span class="token comment"># 3.可以将分组数据变成数据表字典,dict(list(GroupByObj)) </span>
groupDict <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 先转列表再转字典</span>
groupDict<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span>
</code></pre></div></details> <h3 id="数据分组操作-5-对行索引名进行分组"><a href="#数据分组操作-5-对行索引名进行分组" class="header-anchor">#</a> 数据分组操作(5)  对行索引名进行分组</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(5)  对行索引名进行分组&quot;&quot;&quot;</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'k2'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span><span class="token punctuation">:</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'v2'</span><span class="token punctuation">:</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
                index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'c1'</span><span class="token punctuation">,</span><span class="token string">'cc2'</span><span class="token punctuation">,</span><span class="token string">'cc3'</span><span class="token punctuation">,</span><span class="token string">'c4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
<span class="token comment"># 1.行索引函数分组</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 2.行索引函数分组</span>
df<span class="token punctuation">.</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'c1'</span><span class="token punctuation">,</span><span class="token string">'cc2'</span><span class="token punctuation">,</span><span class="token string">'cc3'</span><span class="token punctuation">,</span><span class="token string">'c1'</span><span class="token punctuation">]</span> <span class="token comment"># 重置索引</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># df</span>
</code></pre></div></details> <h3 id="数据分组操作-6-聚合函数"><a href="#数据分组操作-6-聚合函数" class="header-anchor">#</a> 数据分组操作(6)  聚合函数</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(6)  聚合函数&quot;&quot;&quot;</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
<span class="token comment"># 1.非空值计数</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 分组乘积</span>
<span class="token comment"># df.iloc[3, 2] = np.nan # 将3,2设为NaN</span>
<span class="token comment"># df.groupby('k1').prod() # NaN不参与乘积</span>

<span class="token comment"># 3.分组方差和标准差</span>
<span class="token comment"># df.iloc[3, 2] = np.nan</span>
<span class="token comment"># df.groupby('k1').var() # 方差</span>
<span class="token comment"># df.groupby('k1').std() # 样本标准差 (numpy的是总体标准偏差???)</span>

<span class="token comment"># 4.分位数</span>
<span class="token comment"># df.iloc[3, 2] = np.nan</span>
<span class="token comment"># df.groupby(['k1', 'k2']).quantile(0.75)</span>

<span class="token comment"># 5.首尾值</span>
<span class="token comment"># df.iloc[3, 2] = np.nan</span>
<span class="token comment"># # df.groupby('k1').first()</span>
<span class="token comment"># df.groupby('k1').last()</span>

<span class="token comment"># 6.数据探索</span>
<span class="token comment">## 在数据分析的数据探索阶段，需要对数据有个整体的感知，如果按上面步骤一个个看的话比较麻烦。Pandas提供describe()函数，可以生成常用方法结果</span>
df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>nan
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="数据分组操作-7-自定义聚合函数agg"><a href="#数据分组操作-7-自定义聚合函数agg" class="header-anchor">#</a> 数据分组操作(7)  自定义聚合函数agg()</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;数据分组操作(7)  自定义聚合函数agg()&quot;&quot;&quot;</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">my_fun</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> data<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>nan

<span class="token comment"># 1.自定义函数</span>
<span class="token comment"># df.groupby('k1').agg(my_fun)</span>

<span class="token comment"># 2.自定义agg函数列表</span>
<span class="token comment"># df.groupby('k1').agg(['mean', 'max', 'min', my_fun])</span>

<span class="token comment"># 2.2 自定义agg函数列表 [指定应用结果的列名称(用元组)]</span>
<span class="token comment"># df.groupby('k1').agg([('平均值', 'mean'), ('最大值', 'max'), ('最小值', 'min'), (&quot;最大最小值之和&quot;, my_fun)])</span>

<span class="token comment"># 2.3 自定义agg函数列表 [指定列名称(用元组) + 前缀add_prefix]</span>
<span class="token comment">## 定义新数据表列名时，在同一行中命名会出现相同的情况，容易混淆</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span> my_fun <span class="token punctuation">)</span><span class="token punctuation">.</span>add_prefix<span class="token punctuation">(</span><span class="token string">'x_'</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="自定义聚合操作-分组转换与分组应用"><a href="#自定义聚合操作-分组转换与分组应用" class="header-anchor">#</a> 自定义聚合操作  分组转换与分组应用</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;自定义聚合操作  分组转换与分组应用&quot;&quot;&quot;</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>

<span class="token comment"># df.iloc[3,2] = np.nan</span>

<span class="token comment"># 1.transform()函数 如果我们需要将统计结果参照原表的shape,直接广播到列中</span>
<span class="token comment"># df.groupby('k1').transform(np.mean)</span>
<span class="token comment"># df.groupby('k1').mean()  # ?区别</span>

<span class="token comment"># 2.GroupBy对象的transform()函数，与agg()一样可以传入自定义函数</span>
<span class="token keyword">def</span> <span class="token function">my_fun</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> data<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># df.groupby(['k1', 'k2']).transform(my_fun)  # ????????????????????不好使</span>
df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'k1'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'v1'</span><span class="token punctuation">,</span> <span class="token string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span>my_fun<span class="token punctuation">)</span>

<span class="token comment"># 3.agg和transform的区别</span>
<span class="token comment">## agg()函数 必须是可以汇聚的值（ aggregated value ）</span>
<span class="token comment">## transform()函数则可以传入普通的转换函数</span>
<span class="token comment"># def divide(df,n=2):</span>
<span class="token comment">#     return df/n</span>

<span class="token comment"># df.groupby('k1').agg(divide) # Exception: Must produce aggregated value</span>
<span class="token comment"># df.groupby(&quot;k1&quot;)['v1','v2'].transform(divide)</span>
</code></pre></div></details> <h3 id="通用的apply方法"><a href="#通用的apply方法" class="header-anchor">#</a> 通用的apply方法</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
通用的apply方法 可以是非汇聚函数
1. 通常，agg聚合生成的表shape小于原表，而apply和transform组合的shape可以等于原表
&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">'''
    agg和transform的局限
    agg()函数需要传入的方法可以返回汇聚的值（ aggregated value ），transform()函数则可以是N:1的汇聚值，也可以是1对1的转换值。
    如果是输入M到输出N的函数(M&gt;N)，agg和transform都无法使用！比如: 取分组的前N个值
'''</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_rows</span><span class="token punctuation">(</span>df<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
    <span class="token keyword">return</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

<span class="token comment"># df.groupby('k1')['v1','v2'].agg(get_rows) #  ValueError: Shape of passed values is (4, 2), indices imply (2, 2)</span>
<span class="token comment"># df.groupby(&quot;k1&quot;)['v1','v2'].transform(get_rows) # IndexingError: ('Too many indexers', 'occurred at index v1')</span>

<span class="token comment"># 1.取分组前N个值的方法</span>
<span class="token comment"># df.groupby('k1')['v1','v2'].apply(get_rows,1)</span>

<span class="token comment"># 2.也可以用apply()取TopN个值</span>
<span class="token keyword">def</span> <span class="token function">topn</span><span class="token punctuation">(</span>df<span class="token punctuation">,</span> n<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token string">'sort_column'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> df<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>by<span class="token operator">=</span>column<span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span>

df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&quot;k1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'v1'</span><span class="token punctuation">,</span><span class="token string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>topn<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'v2'</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="透视表与交叉表-透视表-pivot-table"><a href="#透视表与交叉表-透视表-pivot-table" class="header-anchor">#</a> 透视表与交叉表  透视表(Pivot Table)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot; 透视表与交叉表  透视表(Pivot Table)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token triple-quoted-string string">'''
透视表(pivot table)是各种电子表格程序和其他数据分析软件中一种常见的数据汇总工具。它根据一个或多个键对数据进行聚合，并根据行和列上得分组建将数据分配到各个矩形区域中。
1. 在Python和pandas中，可以通过本章所介绍的groupby功能以及（能够利用层次化索引的）重塑运算制作透视表。
2. DataFrame有一个pivot_table方法，此外还有一个顶级的pandas.pivot_table函数。除了能为groupby提供便利之外，pivot_table还可以添加分项小计（也叫margins
'''</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># DataFrame.pivot_table(Index, Columns, aggFunc(默认为np.mean), fill_value)</span>
<span class="token comment"># 1.如果只指定pivot_tabel()函数的index参数，不指定columns参数和fill_value参数，其结果和前面介绍的分组聚合结果一致。</span>
<span class="token comment"># df.pivot_table(index='k1') # 相当于df.groupby('k1').mean()</span>

<span class="token comment"># 2.指定输出的列</span>
<span class="token comment"># df.pivot_table(['v1', 'v2'], index='k1') # 相当于df.groupby('k1')['v1', 'v2'].mean()</span>

<span class="token comment"># 3.如果只指定pivot_tabel()函数的index参数，指定columns参数，就是将以列维度进行分组，其效果和指定两个分组行索引，再将返回的层次索引unstack() 结果一致</span>
df<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token string">'k1'</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token string">'k2'</span><span class="token punctuation">)</span> <span class="token comment"># 相当于df.groupby(['k1', 'k2']).mean().unstack()</span>
</code></pre></div></details> <h3 id="透视表与交叉表-交叉表-cross-table"><a href="#透视表与交叉表-交叉表-cross-table" class="header-anchor">#</a> 透视表与交叉表  交叉表(Cross Table)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot; 透视表与交叉表  交叉表(Cross Table)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token triple-quoted-string string">&quot;&quot;&quot;
1. 交叉表(cross table) 是矩阵格式的一种表格，显示变量的（多变量）频率分布。
2. 交叉表被广泛用于调查研究，商业智能，工程和科学研究。它们提供了两个变量之间的相互关系的基本画面，可以帮助他们发现它们之间的相互作用。
3. 卡尔·皮尔逊（Karl Pearson）首先在“关于应变的理论及其关联理论与正常相关性”中使用了交叉表。
4. 在pandas中，交叉表是一种特殊的透视表。
&quot;&quot;&quot;</span>
<span class="token comment"># pd.crosstab(index, columns, margins[边际求和开关])</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'k1'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'k2'</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'v1'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'v2'</span> <span class="token punctuation">:</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_rows</span><span class="token punctuation">(</span>df<span class="token punctuation">,</span>n<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
    <span class="token keyword">return</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>nan
<span class="token comment"># pd.crosstab(df['k1'],df['k2'])</span>
pd<span class="token punctuation">.</span>crosstab<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>df<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>margins<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="seaborn-pandas-可视化"><a href="#seaborn-pandas-可视化" class="header-anchor">#</a> Seaborn(Pandas)可视化</h2> <p><strong>折线图</strong></p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
df<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment"># df</span>
</code></pre></div></details> <p><strong>条形图</strong></p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code>fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>rand<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>index <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token comment">#kind选择图表类型  'bar' 垂直条形图 </span>
data<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> ax <span class="token operator">=</span> axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">)</span> 
<span class="token comment"># 'barh' 水平条形图 </span>
data<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind <span class="token operator">=</span> <span class="token string">'barh'</span><span class="token punctuation">,</span> ax <span class="token operator">=</span> axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'b'</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre></div></details> <p><strong>直方图</strong></p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">as</span> skds
<span class="token triple-quoted-string string">&quot;&quot;&quot;直方图&quot;&quot;&quot;</span>

<span class="token comment"># iris = skds.load_iris()</span>
<span class="token comment"># df_iris = pd.DataFrame(iris.data,columns=iris.feature_names)</span>
<span class="token comment"># df_iris.hist('sepal length (cm)')</span>
<span class="token comment"># plt.show()</span>

iris <span class="token operator">=</span> skds<span class="token punctuation">.</span>load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span>
df_iris <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">,</span>columns<span class="token operator">=</span>iris<span class="token punctuation">.</span>feature_names<span class="token punctuation">)</span>
df_iris<span class="token punctuation">.</span>hist<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">## --------------------------------------------</span>

fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
data<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>ax <span class="token operator">=</span> axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bins <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span>       <span class="token comment">#直方图  </span>
data<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind <span class="token operator">=</span> <span class="token string">'kde'</span><span class="token punctuation">,</span> ax <span class="token operator">=</span> axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment">#密度图  </span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre></div></details> <p><strong>散点图</strong></p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code>iris <span class="token operator">=</span> skds<span class="token punctuation">.</span>load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span>
df_iris <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">,</span>columns<span class="token operator">=</span>iris<span class="token punctuation">.</span>feature_names<span class="token punctuation">)</span>
df_iris<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">'scatter'</span><span class="token punctuation">,</span>x<span class="token operator">=</span><span class="token string">&quot;sepal length (cm)&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;sepal width (cm)&quot;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <p>Matplotlib无疑是高度可定制的，但快速实施出吸引人的细节就变得有些复杂。Seaborn作为一个带着定制主题和高级界面控制的Matplotlib扩展包，能让绘图变得更轻松</p> <p><strong>示例</strong></p> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (单变量分布)&quot;&quot;&quot;</span>
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns 

<span class="token triple-quoted-string string">&quot;&quot;&quot;最快速查看单变量分布无疑是使用distplot()函数。默认情况下，这将绘制一个直方图，并拟合出核密度估计(KDE)&quot;&quot;&quot;</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># ---------------------------------</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (直方图)&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;
直方图通过在数据的范围内切成数据片段，然后绘制每个数据片段中的观察次数，来表示整体数据的分布。
我们删除密度曲线并添加了地毯图，每个观察点绘制一个小的垂直刻度
&quot;&quot;&quot;</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> kde<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> rug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (核密度估计)&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn的displot()函数，通过设置参数，可以实现只显示核密度估计和地毯图&quot;&quot;&quot;</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> hist<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> rug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (散点双变量分布)&quot;&quot;&quot;</span>

<span class="token comment"># 随机生成两列，其均值为[0,1],协方差矩阵为[(1, 0.5), (0.5, 1)]的数组</span>

mean<span class="token punctuation">,</span> cov <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
data <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>multivariate_normal<span class="token punctuation">(</span>mean<span class="token punctuation">,</span> cov<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>jointplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (成对关系图)&quot;&quot;&quot;</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
要在数据集中绘制多个成对双变量分布，可以使用pairplot()函数。这将创建一个轴的矩阵，并显示DataFrame中每对列的关系。
默认情况下，它也绘制每个变量在对角轴上的单变量。
&quot;&quot;&quot;</span>

<span class="token keyword">import</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">as</span> skds
iris <span class="token operator">=</span> skds<span class="token punctuation">.</span>load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span>
df_iris <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">,</span>columns<span class="token operator">=</span>iris<span class="token punctuation">.</span>feature_names<span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>df_iris<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (线性回归线一)&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn的lmplot(data,x,y)函数，将data数据表中x列和y列数据，生成散点图，并绘制线性回归线。本示例使用tips数据集。&quot;&quot;&quot;</span>
<span class="token comment"># tips = sns.load_dataset(&quot;tips&quot;)</span>
tips <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/tips.csv'</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>lmplot<span class="token punctuation">(</span>data<span class="token operator">=</span>tips<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">&quot;total_bill&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;tip&quot;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn可视化方法  (线性回归线二)&quot;&quot;&quot;</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Seaborn的jointplot()函数绘制双变量分布时，也可以绘制回归线。设置kind参数为“reg”。本示例使用tips数据集。效果如下&quot;&quot;&quot;</span>

<span class="token comment"># tips = sns.load_dataset(&quot;tips&quot;)</span>
tips <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/tips.csv'</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>jointplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">&quot;total_bill&quot;</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">&quot;tip&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>tips<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">&quot;reg&quot;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># tips</span>

<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;生成数据&quot;&quot;&quot;</span>
<span class="token keyword">import</span> csv
<span class="token keyword">import</span> random
<span class="token keyword">import</span> datetime

filepath <span class="token operator">=</span><span class="token string">'data/data.csv'</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    <span class="token comment">#创建csv文件写入对象</span>
    wr <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>fp<span class="token punctuation">)</span>
    <span class="token comment">#写入表头</span>
    wr<span class="token punctuation">.</span> writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'日期'</span><span class="token punctuation">,</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">#生成模拟数据</span>
    startDate <span class="token operator">=</span> datetime<span class="token punctuation">.</span> date<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">#生成365个模拟数据，可以根据需要进行调整</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span> <span class="token punctuation">(</span><span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#生成一个模拟数据，写入csv文件</span>
        amount <span class="token operator">=</span> <span class="token number">300</span> <span class="token operator">+</span> i<span class="token operator">*</span><span class="token number">5</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>randrange <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
        wr<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>startDate<span class="token punctuation">)</span><span class="token punctuation">,</span> amount<span class="token punctuation">]</span> <span class="token punctuation">)</span>
        <span class="token comment">#下一天</span>
        startDate <span class="token operator">=</span> startDate <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta <span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token string">&quot;OK&quot;</span>

<span class="token comment">## ---------------------------------</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;生成模拟数据&quot;&quot;&quot;</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 用含日期时间索引与标签的 NumPy 数组生成 DataFrame</span>
dates <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>pd<span class="token punctuation">.</span>date_range<span class="token punctuation">(</span><span class="token string">&quot;20200101&quot;</span><span class="token punctuation">,</span> periods<span class="token operator">=</span><span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'日期'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> dates<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> dates<span class="token punctuation">.</span>join<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

filepath <span class="token operator">=</span> <span class="token string">'data\data0.csv'</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token comment"># sys.stdout, # 输出到控制台</span>
          na_rep<span class="token operator">=</span><span class="token string">'non'</span><span class="token punctuation">,</span> <span class="token comment"># 存储空值</span>
          index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token comment"># 不存储索引(index)</span>
          header<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># 存储列名</span>
<span class="token punctuation">)</span>

<span class="token comment">## ---------------------------------</span>

<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 读取数据，丢弃缺失值</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'data\\data0.csv'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># print(df['日期'])</span>

<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment">#生成营业额折线图</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'日期'</span><span class="token punctuation">)</span>
<span class="token comment"># plt.savefig('data\\test\\first.jpg')</span>

<span class="token comment">#按月统计，生成柱状图</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
df1 <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token comment"># map()会根据提供的函数对指定序列做映射。第一个参数 function 以参数序列中的每一个元素调用 function 函数，返回包含每次 function 函数返回值的新列表</span>
<span class="token comment"># lambda简化了函数定义的书写形式。使代码更为简洁，但是使用函数的定义方式更为直观，易理解。</span>
<span class="token comment"># def fun(x):</span>
<span class="token comment">#     return x[:x.rindex('-')]</span>

df1<span class="token punctuation">[</span><span class="token string">'month'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df1<span class="token punctuation">[</span><span class="token string">'日期'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token punctuation">:</span>x<span class="token punctuation">.</span>rindex<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># lambda x:x[:x.rindex('-')]</span>
df1 <span class="token operator">=</span> df1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'month'</span><span class="token punctuation">,</span> as_index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
df1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'month'</span><span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token comment"># plt.savefig('data\\test\\second.jpg')</span>

<span class="token comment"># 查找涨幅最大的月份，写入文件 </span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
df2 <span class="token operator">=</span> df1<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token string">'month'</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>diff<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># DataFrame.nlargest(self, n, columns, keep='first') 返回按列降序排列的前n行。以降序返回column中具有最大值的前n行。未指定的列也将返回，但不用于排序。</span>
<span class="token comment"># 此方法等效于 ，但性能更高。df.sort_values(columns, ascending=False).head(n)</span>
m <span class="token operator">=</span> df2<span class="token punctuation">[</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;销量最高月份</span><span class="token interpolation"><span class="token punctuation">{</span>df1<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>m<span class="token punctuation">,</span> <span class="token string">'month'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'data\\test\\maxMonth.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
    fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>df1<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>m<span class="token punctuation">,</span> <span class="token string">'month'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 按季度统计，生成饼状图</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
one<span class="token operator">=</span>df1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
two<span class="token operator">=</span>df1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
three<span class="token operator">=</span>df1<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
four<span class="token operator">=</span>df1<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'销量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span><span class="token punctuation">[</span>one<span class="token punctuation">,</span> two<span class="token punctuation">,</span> three<span class="token punctuation">,</span> four<span class="token punctuation">]</span><span class="token punctuation">,</span> labels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'第一季度'</span><span class="token punctuation">,</span> <span class="token string">'第二季度'</span><span class="token punctuation">,</span> <span class="token string">'第三季度'</span><span class="token punctuation">,</span> <span class="token string">'第四季度'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># plt.savefig('data\\test\\third.jpg')</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div></details> <h2 id="matplotlib可视化"><a href="#matplotlib可视化" class="header-anchor">#</a> matplotlib可视化</h2> <h3 id="条形图"><a href="#条形图" class="header-anchor">#</a> 条形图</h3> <h4 id="条形图-2"><a href="#条形图-2" class="header-anchor">#</a> 条形图</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;第一次作业  条形图&quot;&quot;&quot;</span>
<span class="token keyword">import</span>  pymysql
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token comment"># from matplotlib import font_manager</span>
 
<span class="token comment">##获取一个数据库连接，注意如果是UTF-8类型的，需要制定数据库</span>
db<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>passwd<span class="token operator">=</span><span class="token string">&quot;123456789&quot;</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>db<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span>charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
cursor<span class="token operator">=</span>db<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取一个游标</span>
sql<span class="token operator">=</span><span class="token string">&quot;select city,need from citys&quot;</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
result<span class="token operator">=</span>cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#result为元组</span>
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#关闭游标</span>
db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#关闭数据库</span>
 
<span class="token comment">#将元组数据存进列表中</span>
city<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
need<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> x <span class="token keyword">in</span> result<span class="token punctuation">:</span>
    city<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    need<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    
<span class="token comment"># 一种设置字体的方式</span>
<span class="token comment"># my_font = font_manager.FontProperties(fname=&quot;D:\software\python\Anaconda3\Library\MyFonts\GeiTangBuDaoDan.ttf&quot;)</span>
<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment"># 设置图形大小</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">)</span>
<span class="token comment"># 设置刻度字体大小</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token comment">#直方图</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>need<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> need<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span> tick_label<span class="token operator">=</span>city<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&quot;城市名&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&quot;数量&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;城市职位需求图&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">for</span>  x<span class="token punctuation">,</span>y <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>need<span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x<span class="token operator">-</span><span class="token number">0.4</span><span class="token punctuation">,</span> y<span class="token operator">+</span><span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token string">'%s'</span> <span class="token operator">%</span> y<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h4 id="条形图-bar"><a href="#条形图-bar" class="header-anchor">#</a> 条形图 bar()</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;条形图 bar()&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 示例</span>
<span class="token comment"># plt.bar(np.arange(2,5),np.arange(1,4),</span>
<span class="token comment">#         label=&quot;zt example&quot;) </span>
<span class="token comment"># plt.bar([1,2,3],[2,4,1],label=&quot;tz example&quot;, color='g')</span>
<span class="token comment"># plt.xlabel(&quot;this is x&quot;)</span>
<span class="token comment"># plt.ylabel(&quot;this is y&quot;)</span>
<span class="token comment"># plt.title(&quot;this is bar&quot;)</span>
<span class="token comment"># plt.legend()</span>
<span class="token comment"># plt.show()</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;展示2017票房数据&quot;&quot;&quot;</span>
<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment"># 1.设置图片大小</span>
<span class="token comment"># 实例化figure并传递参数  dpi为每英寸像素点数</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>

movie_name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;战狼2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;速度与激情8&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;功夫瑜伽&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;西游伏妖篇&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;变形金刚5：最后的骑士&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;摔跤吧！爸爸&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;加勒比海盗5：死无对证&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;金刚：骷髅岛&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;极限特工：终极回归&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;生化危机6：终章&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;乘风破浪&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;神偷奶爸3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;智取威虎山&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;大闹天竺&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;金刚狼3：殊死一战&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;蜘蛛侠：英雄归来&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;悟空传&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;银河护卫队2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;情圣&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;新木乃伊&quot;</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
box_office <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">56.01</span><span class="token punctuation">,</span><span class="token number">26.94</span><span class="token punctuation">,</span><span class="token number">17.53</span><span class="token punctuation">,</span><span class="token number">16.49</span><span class="token punctuation">,</span><span class="token number">15.45</span><span class="token punctuation">,</span><span class="token number">12.96</span><span class="token punctuation">,</span><span class="token number">11.8</span><span class="token punctuation">,</span><span class="token number">11.61</span><span class="token punctuation">,</span><span class="token number">11.28</span><span class="token punctuation">,</span><span class="token number">11.12</span><span class="token punctuation">,</span><span class="token number">10.49</span><span class="token punctuation">,</span><span class="token number">10.3</span><span class="token punctuation">,</span><span class="token number">8.75</span><span class="token punctuation">,</span><span class="token number">7.55</span><span class="token punctuation">,</span><span class="token number">7.32</span><span class="token punctuation">,</span><span class="token number">6.99</span><span class="token punctuation">,</span><span class="token number">6.88</span><span class="token punctuation">,</span><span class="token number">6.86</span><span class="token punctuation">,</span><span class="token number">6.58</span><span class="token punctuation">,</span><span class="token number">6.23</span><span class="token punctuation">]</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> <span class="token punctuation">{</span><span class="token string">&quot;电影名&quot;</span><span class="token punctuation">:</span>movie_name<span class="token punctuation">,</span> <span class="token string">&quot;票房(单位:亿)&quot;</span><span class="token punctuation">:</span>box_office<span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment"># df</span>
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># x轴的列表</span>
y <span class="token operator">=</span> box_office

<span class="token comment"># bar()绘制条形图,只能接受可迭代的数字对象</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>
    width <span class="token operator">=</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token comment"># 默认0.8</span>
    color <span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">,</span>
    tick_label <span class="token operator">=</span> y<span class="token punctuation">,</span>
    label <span class="token operator">=</span> <span class="token string">'电影'</span><span class="token punctuation">,</span> <span class="token comment"># 为设置图例作准备</span>
    alpha <span class="token operator">=</span> <span class="token number">0.9</span>
<span class="token punctuation">)</span>
<span class="token comment"># 通过设置xticks使数字与字符串对应</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">,</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span>
<span class="token comment"># 设置描述信息</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;2017年电影票房展示&quot;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 显示图例</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h4 id="水平条形图-barh"><a href="#水平条形图-barh" class="header-anchor">#</a> 水平条形图 barh()</h4> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;水平条形图 barh()&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token triple-quoted-string string">&quot;&quot;&quot;展示2017票房数据&quot;&quot;&quot;</span>
movie_name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;战狼2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;速度与激情8&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;功夫瑜伽&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;西游伏妖篇&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;变形金刚5：最后的骑士&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;摔跤吧！爸爸&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;加勒比海盗5：死无对证&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;金刚：骷髅岛&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;极限特工：终极回归&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;生化危机6：终章&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;乘风破浪&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;神偷奶爸3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;智取威虎山&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;大闹天竺&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;金刚狼3：殊死一战&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;蜘蛛侠：英雄归来&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;悟空传&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;银河护卫队2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;情圣&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;新木乃伊&quot;</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
box_office <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">56.01</span><span class="token punctuation">,</span><span class="token number">26.94</span><span class="token punctuation">,</span><span class="token number">17.53</span><span class="token punctuation">,</span><span class="token number">16.49</span><span class="token punctuation">,</span><span class="token number">15.45</span><span class="token punctuation">,</span><span class="token number">12.96</span><span class="token punctuation">,</span><span class="token number">11.8</span><span class="token punctuation">,</span><span class="token number">11.61</span><span class="token punctuation">,</span><span class="token number">11.28</span><span class="token punctuation">,</span><span class="token number">11.12</span><span class="token punctuation">,</span><span class="token number">10.49</span><span class="token punctuation">,</span><span class="token number">10.3</span><span class="token punctuation">,</span><span class="token number">8.75</span><span class="token punctuation">,</span><span class="token number">7.55</span><span class="token punctuation">,</span><span class="token number">7.32</span><span class="token punctuation">,</span><span class="token number">6.99</span><span class="token punctuation">,</span><span class="token number">6.88</span><span class="token punctuation">,</span><span class="token number">6.86</span><span class="token punctuation">,</span><span class="token number">6.58</span><span class="token punctuation">,</span><span class="token number">6.23</span><span class="token punctuation">]</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> <span class="token punctuation">{</span><span class="token string">&quot;电影名&quot;</span><span class="token punctuation">:</span>movie_name<span class="token punctuation">,</span> <span class="token string">&quot;票房(单位:亿)&quot;</span><span class="token punctuation">:</span>box_office<span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment"># df</span>

<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment"># 1.设置图片大小</span>
<span class="token comment"># 实例化figure并传递参数  dpi为每英寸像素点数</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># x轴的列表</span>
y <span class="token operator">=</span> box_office

<span class="token comment"># bar()绘制条形图,只能接受可迭代的数字对象</span>
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>
    height <span class="token operator">=</span> <span class="token number">0.4</span><span class="token punctuation">,</span>
    color <span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">,</span>
    label <span class="token operator">=</span> <span class="token string">'电影'</span><span class="token punctuation">,</span> <span class="token comment"># 为设置图例作准备</span>
    alpha <span class="token operator">=</span> <span class="token number">0.9</span><span class="token punctuation">,</span>
    align<span class="token operator">=</span><span class="token string">'center'</span>
<span class="token punctuation">)</span>

<span class="token comment"># plt.yticks(y, movie_name) # , rotation=90</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> minor<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>invert_yaxis<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 标签读取自上而下labels read top-to-bottom</span>
<span class="token comment"># 设置描述信息</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&quot;2017年电影票房展示&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment"># 显示图例</span>
ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="子图"><a href="#子图" class="header-anchor">#</a> 子图</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;子图&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token comment">##获取一个数据库连接，注意如果是UTF-8类型的，需要制定数据库</span>
db<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>passwd<span class="token operator">=</span><span class="token string">&quot;123456789&quot;</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>db<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span>charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
cursor<span class="token operator">=</span>db<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取一个游标</span>
sql<span class="token operator">=</span><span class="token string">&quot;select city,need from citys&quot;</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
result<span class="token operator">=</span>cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#result为元组</span>
col_result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>description  <span class="token comment"># 获取查询结果的字段描述</span>
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#关闭游标</span>
db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#关闭数据库</span>
 
<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment"># 设置图形大小</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">)</span>
fig<span class="token punctuation">,</span> axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 用数据库查询到的数据创建DataFrame</span>
<span class="token comment"># print(col_result)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>result<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span>col_result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> col_result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 饼图</span>
slices <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
activities <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pie<span class="token punctuation">(</span>slices<span class="token punctuation">,</span>labels<span class="token operator">=</span>activities<span class="token punctuation">,</span>
        startangle<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token comment"># 初始角度</span>
        shadow<span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># 阴影</span>
        textprops<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token string">'small'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">#         colors=[], # 设置颜色</span>
<span class="token comment">#         radius=1.6, # 半径</span>
        explode<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 突出</span>
        autopct<span class="token operator">=</span><span class="token string">'%1.2f%%'</span><span class="token punctuation">)</span> <span class="token comment"># </span>

<span class="token comment"># 条形图</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bar<span class="token punctuation">(</span>df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'pink'</span><span class="token punctuation">)</span>
<span class="token comment"># axes[1].xt</span>

plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'城市职位需求图'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="饼图"><a href="#饼图" class="header-anchor">#</a> 饼图</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;第二次作业  饼图&quot;&quot;&quot;</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token comment">##获取一个数据库连接，注意如果是UTF-8类型的，需要制定数据库</span>
db<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>passwd<span class="token operator">=</span><span class="token string">&quot;123456789&quot;</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>db<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span>charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
cursor<span class="token operator">=</span>db<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#获取一个游标</span>
sql<span class="token operator">=</span><span class="token string">&quot;select city,need from citys&quot;</span>
cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
result<span class="token operator">=</span>cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#result为元组</span>
col_result <span class="token operator">=</span> cursor<span class="token punctuation">.</span>description  <span class="token comment"># 获取查询结果的字段描述</span>
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#关闭游标</span>
db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#关闭数据库</span>
 
<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment"># 设置图形大小</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">)</span>

<span class="token comment"># 用数据库查询到的数据创建DataFrame</span>
<span class="token comment"># print(col_result)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>result<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span>col_result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> col_result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 饼图</span>
slices <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
activities <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>slices<span class="token punctuation">,</span>labels<span class="token operator">=</span>activities<span class="token punctuation">,</span>
        startangle<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token comment"># 初始角度</span>
        shadow<span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># 阴影</span>
        textprops<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'size'</span><span class="token punctuation">:</span> <span class="token string">'small'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">#         colors=[], # 设置颜色</span>
<span class="token comment">#         radius=1.6, # 半径</span>
        explode<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 突出</span>
        autopct<span class="token operator">=</span><span class="token string">'%1.2f%%'</span><span class="token punctuation">)</span> <span class="token comment"># </span>

plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'城市职位需求图'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <h3 id="折线图-完整"><a href="#折线图-完整" class="header-anchor">#</a> 折线图(完整)</h3> <details class="custom-block details"><summary>点击查看</summary> <div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">&quot;&quot;&quot;折线图   (画出你和同桌在11-25岁谈过的女友数)  &quot;&quot;&quot;</span>
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 设置字体</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'LiSu'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token comment"># 1.设置图片大小</span>
<span class="token comment"># 实例化figure并传递参数  dpi为每英寸像素点数</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token string">'Figure Object 1'</span><span class="token punctuation">,</span> <span class="token comment"># 图形对象名称  窗口左上角显示</span>
    figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 窗口大小</span>
    dpi<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token comment"># 分辨率</span>
    facecolor <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">,</span>     <span class="token comment"># 背景色</span>
<span class="token punctuation">)</span>

<span class="token comment"># x轴和y轴</span>
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
y_1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
y_2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>

plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>
    x<span class="token punctuation">,</span>
    y_1<span class="token punctuation">,</span>
    <span class="token comment"># 折线样式</span>
    color<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span>  <span class="token comment"># 设置线条颜色</span>
    linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span>  <span class="token comment"># 线条风格</span>
    linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment"># 线条粗细</span>
    alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span>  <span class="token comment"># 透明度</span>
    label<span class="token operator">=</span><span class="token string">'自己'</span><span class="token punctuation">,</span>
    <span class="token comment"># 6.折点样式设置</span>
    marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token comment"># 折点形状</span>
    markersize<span class="token operator">=</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token comment"># 或 ms --折点大小</span>
    markerfacecolor<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> <span class="token comment"># 或 mfc --折点实心颜色</span>
<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>
    x<span class="token punctuation">,</span>
    y_2<span class="token punctuation">,</span>
    color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span>  <span class="token comment"># 设置线条颜色</span>
    linestyle<span class="token operator">=</span><span class="token string">':'</span><span class="token punctuation">,</span>  <span class="token comment"># 线条风格</span>
    linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment"># 线条粗细</span>
    alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span>  <span class="token comment"># 透明度</span>
    label<span class="token operator">=</span><span class="token string">'同桌'</span><span class="token punctuation">,</span>
    <span class="token comment"># 折点样式设置</span>
    marker<span class="token operator">=</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token comment"># 折点形状</span>
    markersize<span class="token operator">=</span><span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token comment"># 或 ms --折点大小</span>
    markerfacecolor<span class="token operator">=</span><span class="token string">'pink'</span><span class="token punctuation">,</span> <span class="token comment"># 或 mfc --折点实心颜色</span>
<span class="token punctuation">)</span>

<span class="token comment"># 8.标出最高点 (因为横纵坐标没有必然联系所以比较难整)</span>
zip1 <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y_1<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token comment"># 把横纵坐标合为一个字典</span>
<span class="token comment"># 找出最大值和下标</span>
<span class="token keyword">for</span> key<span class="token punctuation">,</span>value <span class="token keyword">in</span> zip1<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token builtin">max</span><span class="token punctuation">(</span>zip1<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        max_index1 <span class="token operator">=</span> key
        max_value1 <span class="token operator">=</span> value
<span class="token keyword">del</span> zip1
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>max_index1<span class="token punctuation">,</span>max_value1<span class="token punctuation">,</span><span class="token string">'ks'</span><span class="token punctuation">)</span>
s <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;(</span><span class="token interpolation"><span class="token punctuation">{</span>max_index1<span class="token punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">{</span>max_value1<span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span>
<span class="token comment"># plt.annotate()函数用于标注文字</span>
plt<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span>s<span class="token punctuation">,</span> xytext<span class="token operator">=</span><span class="token punctuation">(</span>max_index1<span class="token punctuation">,</span>max_value1<span class="token punctuation">)</span><span class="token punctuation">,</span> xy<span class="token operator">=</span><span class="token punctuation">(</span>max_index1<span class="token punctuation">,</span>max_value1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 注释内容 注释文本的坐标点 被注释的坐标点，二维元组形如(x,y)</span>
<span class="token comment">####</span>
zip2 <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y_2<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token comment"># 把横纵坐标合为一个字典</span>
<span class="token comment"># 找出最大值和下标</span>
<span class="token keyword">for</span> key<span class="token punctuation">,</span>value <span class="token keyword">in</span> zip2<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token builtin">max</span><span class="token punctuation">(</span>zip2<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        max_index2 <span class="token operator">=</span> key
        max_value2 <span class="token operator">=</span> value
<span class="token keyword">del</span> zip2
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>max_index2<span class="token punctuation">,</span>max_value2<span class="token punctuation">,</span><span class="token string">'ks'</span><span class="token punctuation">)</span>
s <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&quot;(</span><span class="token interpolation"><span class="token punctuation">{</span>max_index2<span class="token punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">{</span>max_value2<span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span>
<span class="token comment"># plt.annotate()函数用于标注文字</span>
plt<span class="token punctuation">.</span>annotate<span class="token punctuation">(</span>s<span class="token punctuation">,</span> xytext<span class="token operator">=</span><span class="token punctuation">(</span>max_index2<span class="token punctuation">,</span>max_value2<span class="token punctuation">)</span><span class="token punctuation">,</span> xy<span class="token operator">=</span><span class="token punctuation">(</span>max_index2<span class="token punctuation">,</span>max_value2<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment"># 4.调整x和y轴刻度间距</span>
_xtick_labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;{}岁&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> x<span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token punctuation">,</span> _xtick_labels<span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 5.线条样式 颜色 透明度</span>
<span class="token comment"># 加网格 (透明度)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> linestyle<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 3.描述信息(x轴[y轴.标题]代表什么)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'年龄'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'人数'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;回忆青葱岁月&quot;</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">)</span>

<span class="token comment"># 2.保存到本地 (可设置格式(svg矢量图))</span>
<span class="token comment"># plt.savefig(&quot;data/xxx.svg&quot;)</span>

<span class="token comment"># 7.图片加水印</span>
<span class="token keyword">def</span> <span class="token function">add_watermark</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    fig<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">'寒川环宇'</span><span class="token punctuation">,</span> <span class="token comment"># text的位置,内容</span>
        fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> 
        color<span class="token operator">=</span><span class="token string">'gray'</span><span class="token punctuation">,</span>
        ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span> 
        va<span class="token operator">=</span><span class="token string">'top'</span><span class="token punctuation">,</span>
        rotation<span class="token operator">=</span><span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token comment">#旋转角度</span>
        alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span>
        bbox <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>facecolor <span class="token operator">=</span> <span class="token string">&quot;#B0C4DE&quot;</span><span class="token punctuation">,</span> alpha <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 加框(框体颜色,透明度)</span>
    
add_watermark<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">)</span>
add_watermark<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">)</span>
add_watermark<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">)</span>
add_watermark<span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/user-h/hdata-doc/edit/master/docs/04.其他/01.Python/03.Python类库学习.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/05/03, 23:36:40</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/hdata-doc/pages/f2a340/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Python操作Office</div></a> <a href="/hdata-doc/pages/c2b99b/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">自己写的python程序（减少工作量）</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/hdata-doc/pages/f2a340/" class="prev">Python操作Office</a></span> <span class="next"><a href="/hdata-doc/pages/c2b99b/">自己写的python程序（减少工作量）</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:1033078928@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/user-h" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/aihb" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://music.163.com" title="听音乐" target="_blank" class="iconfont icon-erji"></a><a href="https://bilibili.com" title="哔哩哔哩" target="_blank" class="iconfont icon-bilibili"></a><a href="https://douyin.com/" title="抖音" target="_blank" class="iconfont icon-douyin"></a><a href="" title="猫咪" target="_blank" class="iconfont icon-mao"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2025
    <span>Ai | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/hdata-doc/assets/js/app.37e4fbb6.js" defer></script><script src="/hdata-doc/assets/js/2.82afd9cb.js" defer></script><script src="/hdata-doc/assets/js/65.460effd7.js" defer></script>
  </body>
</html>
